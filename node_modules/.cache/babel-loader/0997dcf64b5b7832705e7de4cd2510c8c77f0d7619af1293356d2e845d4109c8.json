{"ast":null,"code":"var fs = require(\"fs\"),\n  url = require('url'),\n  path = require('path'),\n  tmp = require('./tmp'),\n  _ = require(\"lodash\"),\n  async = require('async'),\n  __slice = Array.prototype.slice,\n  config = require('./config'),\n  callbacks = require(\"./callbacks\"),\n  callbackWithData = callbacks.callbackWithData,\n  simpleCallback = callbacks.simpleCallback,\n  elementCallback = callbacks.elementCallback,\n  elementsCallback = callbacks.elementsCallback,\n  elementOrElementsCallback = callbacks.elementOrElementsCallback,\n  utils = require(\"./utils\"),\n  findCallback = utils.findCallback,\n  codeToString = utils.codeToString,\n  deprecator = utils.deprecator,\n  asserters = require(\"./asserters\"),\n  Asserter = asserters.Asserter,\n  safeExecuteJsScript = require('../build/safe-execute'),\n  safeExecuteAsyncJsScript = require('../build/safe-execute-async'),\n  _waitForConditionInBrowserJsScript = require('../build/wait-for-cond-in-browser');\nvar commands = {};\n\n/**\n * init(desired, cb) -> cb(err, sessionID, capabilities)\n * Initialize the browser. capabilities return may be\n * absent, depending on driver.\n *\n * @jsonWire POST /session\n */\ncommands.init = function () {\n  var args = __slice.call(arguments, 0);\n  this._init.apply(this, args);\n};\n\n/**\n * status(cb) -> cb(err, status)\n *\n * @jsonWire GET /status\n */\ncommands.status = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    absPath: 'status',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * sessions(cb) -> cb(err, sessions)\n *\n * @jsonWire GET /sessions\n */\ncommands.sessions = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    absPath: 'sessions',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Retrieves the current session id.\n * getSessionId(cb) -> cb(err, sessionId)\n * getSessionId()\n */\ncommands.getSessionId = function () {\n  var cb = findCallback(arguments);\n  if (cb) {\n    cb(null, this.sessionID);\n  }\n  return this.sessionID;\n};\ncommands.getSessionID = commands.getSessionId;\n\n/**\n * execute(code, args, cb) -> cb(err, result)\n * execute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 1\n */\ncommands.execute = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    code = fargs.all[0],\n    args = fargs.all[1] || [];\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: code,\n      args: args\n    }\n  });\n};\n\n/**\n * Safely execute script within an eval block, always returning:\n * safeExecute(code, args, cb) -> cb(err, result)\n * safeExecute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 2\n */\ncommands.safeExecute = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    code = fargs.all[0],\n    args = fargs.all[1] || [];\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: safeExecuteJsScript,\n      args: [code, args]\n    }\n  });\n};\n\n/**\n * Evaluate expression (using execute):\n * eval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\n(function () {\n  commands.eval = function (code) {\n    var cb = findCallback(arguments);\n    code = codeToString(code);\n    code = \"return \" + code + \";\";\n    commands.execute.apply(this, [code, function (err, res) {\n      if (err) {\n        return cb(err);\n      }\n      cb(null, res);\n    }]);\n  };\n})();\n\n/**\n * Safely evaluate expression, always returning  (using safeExecute):\n * safeEval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\ncommands.safeEval = function (code) {\n  var cb = findCallback(arguments);\n  code = codeToString(code);\n  commands.safeExecute.apply(this, [code, function (err, res) {\n    if (err) {\n      return cb(err);\n    }\n    cb(null, res);\n  }]);\n};\n\n/**\n * executeAsync(code, args, cb) -> cb(err, result)\n * executeAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\ncommands.executeAsync = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    code = fargs.all[0],\n    args = fargs.all[1] || [];\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute_async',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: code,\n      args: args\n    }\n  });\n};\n\n/**\n * Safely execute async script within an eval block, always returning:\n * safeExecuteAsync(code, args, cb) -> cb(err, result)\n * safeExecuteAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\ncommands.safeExecuteAsync = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    code = fargs.all[0],\n    args = fargs.all[1] || [];\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute_async',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: safeExecuteAsyncJsScript,\n      args: [code, args]\n    }\n  });\n};\n\n/**\n * Alternate strategy to get session capabilities from server session list:\n * altSessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /sessions\n */\ncommands.altSessionCapabilities = function () {\n  var cb = findCallback(arguments);\n  var _this = this;\n  // looking for the current session\n  commands.sessions.apply(this, [function (err, sessions) {\n    if (err) {\n      cb(err, sessions);\n    } else {\n      sessions = sessions.filter(function (session) {\n        return session.id === _this.sessionID;\n      });\n      cb(null, sessions[0] ? sessions[0].capabilities : 0);\n    }\n  }]);\n};\n\n/**\n * sessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /session/:sessionId\n */\ncommands.sessionCapabilities = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    // default url\n    ,\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Opens a new window (using Javascript window.open):\n * newWindow(url, name, cb) -> cb(err)\n * newWindow(url, cb) -> cb(err)\n * name: optional window name\n * Window can later be accessed by name with the window method,\n * or by getting the last handle returned by the windowHandles method.\n */\ncommands.newWindow = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    url = fargs.all[0],\n    name = fargs.all[1];\n  commands.execute.apply(this, [\"var url=arguments[0], name=arguments[1]; window.open(url, name);\", [url, name], cb]);\n};\n\n/**\n * close(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/window\n */\ncommands.close = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE',\n    relPath: '/window',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * currentContext(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/context\n */\ncommands.currentContext = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/context',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * context(contextRef, cb) -> cb(err, context)\n *\n * @jsonWire POST /session/:sessionId/context\n */\ncommands.context = function (contextRef) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/context',\n    cb: simpleCallback(cb),\n    data: {\n      name: contextRef\n    }\n  });\n};\n\n/**\n * contexts(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/contexts\n */\ncommands.contexts = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/contexts',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * window(name, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/window\n */\ncommands.window = function (windowRef) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window',\n    cb: simpleCallback(cb),\n    data: {\n      name: windowRef\n    }\n  });\n};\n\n/**\n * frame(frameRef, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/frame\n */\ncommands.frame = function (frameRef) {\n  var cb = findCallback(arguments);\n  // avoid using this, Webdriver seems very buggy\n  // doesn't work at all with chromedriver\n  if (typeof frameRef === 'function') {\n    frameRef = null;\n  }\n  if (frameRef !== null && typeof frameRef.value !== \"undefined\") {\n    // we have an element object\n    frameRef = {\n      ELEMENT: frameRef.value\n    };\n    frameRef[utils.w3cElementKeyId] = frameRef.value;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/frame',\n    cb: simpleCallback(cb),\n    data: {\n      id: frameRef\n    }\n  });\n};\n\n/**\n * windowName(cb) -> cb(err, name)\n */\ncommands.windowName = function () {\n  var cb = findCallback(arguments);\n  commands.eval.apply(this, [\"window.name\", cb]);\n};\n\n/**\n * windowHandle(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/window_handle\n */\ncommands.windowHandle = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window_handle',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * windowHandles(cb) -> cb(err, arrayOfHandles)\n *\n * @jsonWire GET /session/:sessionId/window_handles\n */\ncommands.windowHandles = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window_handles',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getGeoLocation(cb) -> cb(err, geoLocationObj)\n *\n * @jsonWire GET /session/:sessionId/location\n */\ncommands.getGeoLocation = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/location',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setGeoLocation(lat, lon, alt, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/location\n */\ncommands.setGeoLocation = function (lat, lon, alt) {\n  var cb = findCallback(arguments);\n  if (typeof alt === 'function') {\n    alt = 0;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/location',\n    cb: simpleCallback(cb),\n    data: {\n      location: {\n        latitude: lat,\n        longitude: lon,\n        altitude: alt\n      }\n    }\n  });\n};\n\n/**\n * scroll(xOffset, yOffset, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/scroll\n */\ncommands.scroll = function (xOffset, yOffset) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/scroll',\n    cb: simpleCallback(cb, this),\n    data: {\n      xoffset: xOffset,\n      yoffset: yOffset\n    }\n  });\n};\n\n/**\n * logTypes(cb) -> cb(err, arrayOfLogTypes)\n *\n * @jsonWire GET /session/:sessionId/log/types\n */\ncommands.logTypes = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/log/types',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * log(logType, cb) -> cb(err, arrayOfLogs)\n *\n * @jsonWire POST /session/:sessionId/log\n */\ncommands.log = function (logType) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/log',\n    cb: callbackWithData(cb, this),\n    data: {\n      type: logType\n    }\n  });\n};\n\n/**\n * quit(cb) -> cb(err)\n * Destroy the browser.\n *\n * @jsonWire DELETE /session/:sessionId\n */\ncommands.quit = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    // default url\n    ,\n    emit: {\n      event: 'status',\n      message: '\\nEnding your web drivage..\\n'\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * get(url,cb) -> cb(err)\n * Get a new url.\n *\n * @jsonWire POST /session/:sessionId/url\n */\ncommands.get = function (_url) {\n  if (this._httpConfig.baseUrl) {\n    _url = url.resolve(this._httpConfig.baseUrl, _url);\n  }\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/url',\n    data: {\n      'url': _url\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * refresh(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/refresh\n */\ncommands.refresh = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/refresh',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * maximize(handle, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/maximize\n */\ncommands.maximize = function (win) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/maximize',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * windowSize(handle, width, height, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\ncommands.windowSize = function (win, width, height) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/size',\n    data: {\n      'width': width,\n      'height': height\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * getWindowSize(handle, cb) -> cb(err, size)\n  * getWindowSize(cb) -> cb(err, size)\n  * handle: window handle to get size (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/size\n */\ncommands.getWindowSize = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    win = fargs.all[0] || 'current';\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window/' + win + '/size',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n  * setWindowSize(width, height, handle, cb) -> cb(err)\n  * setWindowSize(width, height, cb) -> cb(err)\n  * width: width in pixels to set size to\n  * height: height in pixels to set size to\n  * handle: window handle to set size for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\ncommands.setWindowSize = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    width = fargs.all[0],\n    height = fargs.all[1],\n    win = fargs.all[2] || 'current';\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/size',\n    cb: simpleCallback(cb),\n    data: {\n      width: width,\n      height: height\n    }\n  });\n};\n\n/**\n  * getWindowPosition(handle, cb) -> cb(err, position)\n  * getWindowPosition(cb) -> cb(err, position)\n  * handle: window handle to get position (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/position\n */\ncommands.getWindowPosition = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    win = fargs.all[0] || 'current';\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window/' + win + '/position',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n  * setWindowPosition(x, y, handle, cb) -> cb(err)\n  * setWindowPosition(x, y, cb) -> cb(err)\n  * x: the x-coordinate in pixels to set the window position\n  * y: the y-coordinate in pixels to set the window position\n  * handle: window handle to set position for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/position\n */\ncommands.setWindowPosition = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    x = fargs.all[0],\n    y = fargs.all[1],\n    win = fargs.all[2] || 'current';\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/position',\n    cb: simpleCallback(cb),\n    data: {\n      x: x,\n      y: y\n    }\n  });\n};\n\n/**\n * forward(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/forward\n */\ncommands.forward = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/forward',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * back(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/back\n */\ncommands.back = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/back',\n    cb: simpleCallback(cb)\n  });\n};\ncommands.setHttpTimeout = function () {\n  deprecator.warn('setHttpTimeout', 'setHttpTimeout/setHTTPInactivityTimeout has been deprecated, use configureHttp instead.');\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    ms = fargs.all[0];\n  commands.configureHttp({\n    timeout: ms\n  }, cb);\n};\ncommands.setHTTPInactivityTimeout = commands.setHttpTimeout;\n\n/**\n * configureHttp(opts)\n *\n * opts example:\n * {timeout:60000, retries: 3, 'retryDelay': 15, baseUrl='http://example.com/'}\n * more info in README.\n *\n */\ncommands.configureHttp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    opts = fargs.all[0];\n  config._configureHttp(this._httpConfig, opts);\n  if (cb) {\n    cb(null);\n  }\n};\n\n/**\n * setImplicitWaitTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/implicit_wait\n */\ncommands.setImplicitWaitTimeout = function (ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts/implicit_wait',\n    data: {\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n// for backward compatibility\ncommands.setWaitTimeout = commands.setImplicitWaitTimeout;\n\n/**\n * setAsyncScriptTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/async_script\n */\ncommands.setAsyncScriptTimeout = function (ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts/async_script',\n    data: {\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setPageLoadTimeout(ms, cb) -> cb(err)\n * (use setImplicitWaitTimeout and setAsyncScriptTimeout to set the other timeouts)\n *\n * @jsonWire POST /session/:sessionId/timeouts\n */\ncommands.setPageLoadTimeout = function (ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts',\n    data: {\n      type: 'page load',\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setCommandTimeout(ms, cb) -> cb(err)\n * (this is for Appium only)\n * @jsonWire POST /session/:sessionId/timeouts\n */\ncommands.setCommandTimeout = function (ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts',\n    data: {\n      type: 'command',\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * element(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element\n */\ncommands.element = function (using, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element',\n    data: {\n      using: using,\n      value: value\n    },\n    cb: elementCallback(cb, this)\n  });\n};\n\n/**\n * Retrieve an element avoiding not found exception and returning null instead:\n * elementOrNull(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 3\n */\ncommands.elementOrNull = function (using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value, function (err, elements) {\n    if (!err) {\n      if (elements.length > 0) {\n        cb(null, elements[0]);\n      } else {\n        cb(null, null);\n      }\n    } else {\n      cb(err);\n    }\n  }]);\n};\n\n/**\n * Retrieve an element avoiding not found exception and returning undefined instead:\n * elementIfExists(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 5\n */\ncommands.elementIfExists = function (using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value, function (err, elements) {\n    if (!err) {\n      if (elements.length > 0) {\n        cb(null, elements[0]);\n      } else {\n        cb(null);\n      }\n    } else {\n      cb(err);\n    }\n  }]);\n};\n\n/**\n * elements(using, value, cb) -> cb(err, elements)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 1\n */\ncommands.elements = function (using, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/elements',\n    data: {\n      using: using,\n      value: value\n    },\n    cb: elementsCallback(cb, this)\n  });\n};\n\n/**\n * Check if element exists:\n * hasElement(using, value, cb) -> cb(err, boolean)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 7\n */\ncommands.hasElement = function (using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value, function (err, elements) {\n    if (!err) {\n      cb(null, elements.length > 0);\n    } else {\n      cb(err);\n    }\n  }]);\n};\n\n/**\n * waitFor(asserter, timeout, pollFreq, cb) -> cb(err, return_value)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitFor(opts, cb) -> cb(err)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(browser , cb) -> cb(err, satisfied, return_value)\n */\ncommands.waitFor = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var opts;\n  // retrieving options\n  if (typeof fargs.all[0] === 'object' && !(fargs.all[0] instanceof Asserter)) {\n    opts = fargs.all[0];\n  } else {\n    opts = {\n      asserter: fargs.all[0],\n      timeout: fargs.all[1],\n      pollFreq: fargs.all[2]\n    };\n  }\n\n  // default\n  opts.timeout = opts.timeout || 1000;\n  opts.pollFreq = opts.pollFreq || 200;\n  if (!opts.asserter) {\n    throw new Error('Missing asserter!');\n  }\n  var _this = this;\n  var endTime = Date.now() + opts.timeout;\n  var unpromisedAsserter = new Asserter(function (browser, cb) {\n    var promise = opts.asserter.assert(browser, cb);\n    if (promise && promise.then && typeof promise.then === 'function') {\n      promise.then(function (res) {\n        cb(null, true, res);\n      }, function (err) {\n        if (err.retriable) {\n          cb(null, false);\n        } else {\n          throw err;\n        }\n      });\n    }\n  });\n  function poll(isFinalCheck) {\n    unpromisedAsserter.assert(_this, function (err, satisfied, value) {\n      if (err && err.message.indexOf(\"timeout\") === -1) {\n        return cb(err);\n      }\n      if (satisfied) {\n        cb(null, value);\n      } else {\n        if (isFinalCheck) {\n          cb(err || new Error(\"Condition wasn't satisfied!\"));\n        } else if (Date.now() > endTime) {\n          // trying one more time for safety\n          setTimeout(poll.bind(null, true), opts.pollFreq);\n        } else {\n          setTimeout(poll, opts.pollFreq);\n        }\n      }\n    });\n  }\n  poll();\n};\n\n/**\n * waitForElement(using, value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n * waitForElement(using, value, timeout, pollFreq, cb) -> cb(err, el)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElement(using, value, opts, cb) -> cb(err, el)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\ncommands.waitForElement = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n    value = fargs.all[1];\n  var opts;\n\n  // retrieving options\n  if (typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)) {\n    opts = fargs.all[2];\n  } else if (fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  }\n\n  // default\n  opts.asserter = opts.asserter || new Asserter(function (el, cb) {\n    cb(null, true);\n  });\n  var unpromisedAsserter = new Asserter(function (el, cb) {\n    var promise = opts.asserter.assert(el, cb);\n    if (promise && promise.then && typeof promise.then === 'function') {\n      promise.then(function () {\n        cb(null, true);\n      }, function (err) {\n        if (err.retriable) {\n          cb(null, false);\n        } else {\n          throw err;\n        }\n      });\n    }\n  });\n  var wrappedAsserter = new Asserter(function (browser, cb) {\n    browser.elements(using, value, function (err, els) {\n      if (err) {\n        return cb(err);\n      }\n      var seq = [];\n      var satisfiedEl;\n      _(els).each(function (el) {\n        seq.push(function (cb) {\n          if (satisfiedEl) {\n            return cb();\n          }\n          unpromisedAsserter.assert(el, function (err, satisfied) {\n            if (err) {\n              return cb(err);\n            }\n            if (satisfied) {\n              satisfiedEl = el;\n            }\n            cb(err);\n          });\n        });\n      });\n      async.series(seq, function (err) {\n        if (err) {\n          return cb(err);\n        }\n        cb(err, !_.isUndefined(satisfiedEl), satisfiedEl);\n      });\n    });\n  });\n  commands.waitFor.apply(this, [{\n    asserter: wrappedAsserter,\n    timeout: opts.timeout,\n    pollFreq: opts.pollFreq\n  }, function (err, value) {\n    if (err && err.message && err.message.match(/Condition/)) {\n      cb(new Error(\"Element condition wasn't satisfied!\"));\n    } else {\n      cb(err, value);\n    }\n  }]);\n};\n\n/**\n * waitForElements(using, value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n * waitForElements(using, value, timeout, pollFreq, cb) -> cb(err, els)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElements(using, value, opts, cb) -> cb(err, els)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\ncommands.waitForElements = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n    value = fargs.all[1];\n  var opts;\n\n  // retrieving options\n  if (typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)) {\n    opts = fargs.all[2];\n  } else if (fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  }\n\n  // default\n  opts.asserter = opts.asserter || new Asserter(function (el, cb) {\n    cb(null, true);\n  });\n  var unpromisedAsserter = new Asserter(function (el, cb) {\n    var promise = opts.asserter.assert(el, cb);\n    if (promise && promise.then && typeof promise.then === 'function') {\n      promise.then(function () {\n        cb(null, true);\n      }, function (err) {\n        if (err.retriable) {\n          cb(null, false);\n        } else {\n          cb(err);\n        }\n      });\n    }\n  });\n  var wrappedAsserter = new Asserter(function (browser, cb) {\n    browser.elements(using, value, function (err, els) {\n      if (err) {\n        return cb(err);\n      }\n      var seq = [];\n      var satisfiedEls = [];\n      _(els).each(function (el) {\n        seq.push(function (cb) {\n          unpromisedAsserter.assert(el, function (err, satisfied) {\n            if (err) {\n              return cb(err);\n            }\n            if (satisfied) {\n              satisfiedEls.push(el);\n            }\n            cb();\n          });\n        });\n      });\n      async.series(seq, function (err) {\n        if (err) {\n          return cb(err);\n        }\n        cb(null, satisfiedEls.length > 0, satisfiedEls);\n      });\n    });\n  });\n  commands.waitFor.apply(this, [{\n    asserter: wrappedAsserter,\n    timeout: opts.timeout,\n    pollFreq: opts.pollFreq\n  }, function (err, value) {\n    if (err && err.message && err.message.match(/Condition/)) {\n      cb(new Error(\"Element condition wasn't satisfied!\"));\n    } else {\n      cb(err, value);\n    }\n  }]);\n};\ncommands.waitForVisible = function (using, value, timeout, pollFreq) {\n  deprecator.warn('waitForVisible', 'waitForVisible has been deprecated, use waitForElement + isVisible asserter instead.');\n  var cb = findCallback(arguments);\n  commands.waitForElement.apply(this, [using, value, asserters.isVisible, timeout, pollFreq, function (err, isVisible) {\n    if (err && err.message && err.message.match(/Element condition wasn't satisfied!/)) {\n      cb(new Error(\"Element didn't become visible\"));\n    } else {\n      cb(err, isVisible);\n    }\n  }]);\n};\n\n/**\n * takeScreenshot(cb) -> cb(err, screenshot)\n *\n * @jsonWire GET /session/:sessionId/screenshot\n */\ncommands.takeScreenshot = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/screenshot',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * saveScreenshot(path, cb) -> cb(err, filePath)\n *\n * path maybe a full file path, a directory path (finishing with /),\n * the screenshot name, or left blank (will create a file in the system temp dir).\n */\ncommands.saveScreenshot = function () {\n  var _this = this;\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var _path = fargs.all[0];\n  function buildFilePath(_path, cb) {\n    if (!_path) {\n      _path = tmp.tmpdir + '/';\n    }\n    if (_path.match(/.*\\/$/)) {\n      tmp.tmpName({\n        template: 'screenshot-XXXXXX.png'\n      }, function (err, fileName) {\n        if (err) {\n          return cb(err);\n        }\n        cb(null, path.join(_path, fileName));\n      });\n    } else {\n      if (path.extname(_path) === '') {\n        _path = _path + '.png';\n      }\n      cb(null, _path);\n    }\n  }\n  buildFilePath(_path, function (err, filePath) {\n    commands.takeScreenshot.apply(_this, [function (err, base64Data) {\n      if (err) {\n        return cb(err);\n      }\n      require(\"fs\").writeFile(filePath, base64Data, 'base64', function (err) {\n        if (err) {\n          return cb(err);\n        }\n        cb(null, filePath);\n      });\n    }]);\n  });\n};\n\n// adding all elementBy... , elementsBy... function\n\nvar addMethodsForSuffix = function (type, singular, plural) {\n  if (singular) {\n    /**\n     * elementByClassName(value, cb) -> cb(err, element)\n     * elementByCssSelector(value, cb) -> cb(err, element)\n     * elementById(value, cb) -> cb(err, element)\n     * elementByName(value, cb) -> cb(err, element)\n     * elementByLinkText(value, cb) -> cb(err, element)\n     * elementByPartialLinkText(value, cb) -> cb(err, element)\n     * elementByTagName(value, cb) -> cb(err, element)\n     * elementByXPath(value, cb) -> cb(err, element)\n     * elementByCss(value, cb) -> cb(err, element)\n     * elementByIosUIAutomation(value, cb) -> cb(err, element)\n     * elementByIosClassChain(value, cb) -> cb(err, element)\n     * elementByIosPredicateString(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomator(value, cb) -> cb(err, element)\n     * elementByAccessibilityId(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/element\n     */\n    commands['element' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.element.apply(this, args);\n    };\n\n    /**\n     * elementByClassNameOrNull(value, cb) -> cb(err, element)\n     * elementByCssSelectorOrNull(value, cb) -> cb(err, element)\n     * elementByIdOrNull(value, cb) -> cb(err, element)\n     * elementByNameOrNull(value, cb) -> cb(err, element)\n     * elementByLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByTagNameOrNull(value, cb) -> cb(err, element)\n     * elementByXPathOrNull(value, cb) -> cb(err, element)\n     * elementByCssOrNull(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationOrNull(value, cb) -> cb(err, element)\n     * elementByIosClassChainOrNull(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringOrNull(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorOrNull(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdOrNull(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 4\n     */\n    commands['element' + utils.elFuncSuffix(type) + 'OrNull'] = function () {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(function (err, elements) {\n        if (!err) {\n          if (elements.length > 0) {\n            cb(null, elements[0]);\n          } else {\n            cb(null, null);\n          }\n        } else {\n          cb(err);\n        }\n      });\n      commands.elements.apply(this, args);\n    };\n\n    /**\n     * elementByClassNameIfExists(value, cb) -> cb(err, element)\n     * elementByCssSelectorIfExists(value, cb) -> cb(err, element)\n     * elementByIdIfExists(value, cb) -> cb(err, element)\n     * elementByNameIfExists(value, cb) -> cb(err, element)\n     * elementByLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByTagNameIfExists(value, cb) -> cb(err, element)\n     * elementByXPathIfExists(value, cb) -> cb(err, element)\n     * elementByCssIfExists(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationIfExists(value, cb) -> cb(err, element)\n     * elementByIosClassChainIfExists(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringIfExists(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorIfExists(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdIfExists(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 6\n     */\n    commands['element' + utils.elFuncSuffix(type) + 'IfExists'] = function () {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(function (err, elements) {\n        if (!err) {\n          if (elements.length > 0) {\n            cb(null, elements[0]);\n          } else {\n            cb(null);\n          }\n        } else {\n          cb(err);\n        }\n      });\n      commands.elements.apply(this, args);\n    };\n\n    /**\n     * hasElementByClassName(value, cb) -> cb(err, boolean)\n     * hasElementByCssSelector(value, cb) -> cb(err, boolean)\n     * hasElementById(value, cb) -> cb(err, boolean)\n     * hasElementByName(value, cb) -> cb(err, boolean)\n     * hasElementByLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByPartialLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByTagName(value, cb) -> cb(err, boolean)\n     * hasElementByXPath(value, cb) -> cb(err, boolean)\n     * hasElementByCss(value, cb) -> cb(err, boolean)\n     * hasElementByIosUIAutomation(value, cb) -> cb(err, boolean)\n     * hasElementByIosClassChain(value, cb) -> cb(err, boolean)\n     * hasElementByIosPredicateString(value, cb) -> cb(err, boolean)\n     * hasElementByAndroidUIAutomator(value, cb) -> cb(err, boolean)\n     * hasElementByAccessibilityId(value, cb) -> cb(err, boolean)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 8\n     */\n    commands['hasElement' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.hasElement.apply(this, args);\n    };\n\n    /**\n     * waitForElementByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementById(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElement.\n     */\n    commands['waitForElement' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElement.apply(this, args);\n    };\n\n    /**\n     * waitForElementsByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsById(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElements.\n     */\n    commands['waitForElements' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElements.apply(this, args);\n    };\n    commands['waitForVisible' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForVisible.apply(this, args);\n    };\n\n    /**\n     * elementsByClassName(value, cb) -> cb(err, elements)\n     * elementsByCssSelector(value, cb) -> cb(err, elements)\n     * elementsById(value, cb) -> cb(err, elements)\n     * elementsByName(value, cb) -> cb(err, elements)\n     * elementsByLinkText(value, cb) -> cb(err, elements)\n     * elementsByPartialLinkText(value, cb) -> cb(err, elements)\n     * elementsByTagName(value, cb) -> cb(err, elements)\n     * elementsByXPath(value, cb) -> cb(err, elements)\n     * elementsByCss(value, cb) -> cb(err, elements)\n     * elementsByIosUIAutomation(value, cb) -> cb(err, elements)\n     * elementsByIosClassChain(value, cb) -> cb(err, elements)\n     * elementsByIosPredicateString(value, cb) -> cb(err, elements)\n     * elementsByAndroidUIAutomator(value, cb) -> cb(err, elements)\n     * elementsByAccessibilityId(value, cb) -> cb(err, elements)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 2\n     */\n  }\n  if (plural) {\n    commands['elements' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.elements.apply(this, args);\n    };\n  }\n};\n_.each(utils.elementFuncTypes, function (suffix) {\n  addMethodsForSuffix(suffix, true, true);\n});\n\n/**\n * getTagName(element, cb) -> cb(err, name)\n *\n * @jsonWire GET /session/:sessionId/element/:id/name\n */\ncommands.getTagName = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/name',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getAttribute(element, attrName, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 1\n */\ncommands.getAttribute = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    element = fargs.all[0],\n    attrName = fargs.all[1];\n  if (!element) {\n    throw new Error('Missing element.');\n  }\n  if (!attrName) {\n    throw new Error('Missing attribute name.');\n  }\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/attribute/' + attrName,\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * isDisplayed(element, cb) -> cb(err, displayed)\n *\n * @jsonWire GET /session/:sessionId/element/:id/displayed\n */\ncommands.isDisplayed = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/displayed',\n    cb: callbackWithData(cb, this)\n  });\n};\ncommands.displayed = commands.isDisplayed;\n\n/**\n  * isEnabled(element, cb) -> cb(err, enabled)\n  *\n  * @jsonWire GET /session/:sessionId/element/:id/enabled\n  */\ncommands.isEnabled = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/enabled',\n    cb: callbackWithData(cb, this)\n  });\n};\ncommands.enabled = commands.isEnabled;\n\n/**\n * isSelected(element, cb) -> cb(err, selected)\n *\n * @jsonWire GET /session/:sessionId/element/:id/selected\n */\ncommands.isSelected = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/selected',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n// commands.selected = commands.isSelected;\n\n/**\n * Get element value (in value attribute):\n * getValue(element, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 3\n */\ncommands.getValue = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    element = fargs.all[0];\n  if (!element) {\n    throw new Error('Missing element.');\n  }\n  commands.getAttribute.apply(this, [element, 'value', cb]);\n};\n\n/**\n * clickElement(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/click\n */\ncommands.clickElement = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/click',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getComputedCss(element, cssProperty , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/css/:propertyName\n */\ncommands.getComputedCss = function (element, cssProperty) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/css/' + cssProperty,\n    cb: callbackWithData(cb, this)\n  });\n};\ncommands.getComputedCSS = commands.getComputedCss;\n\n/**\n * equalsElement(element, other , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/equals/:other\n */\ncommands.equalsElement = function (element, other) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/equals/' + other,\n    cb: callbackWithData(cb, this)\n  });\n};\nvar _flick1 = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    xspeed = fargs.all[0],\n    yspeed = fargs.all[1],\n    swipe = fargs.all[2];\n  var data = {\n    xspeed: xspeed,\n    yspeed: yspeed\n  };\n  if (swipe) {\n    data.swipe = swipe;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/flick',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\nvar _flick2 = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    element = fargs.all[0],\n    xoffset = fargs.all[1],\n    yoffset = fargs.all[2],\n    speed = fargs.all[3];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/flick',\n    data: {\n      element: element,\n      xoffset: xoffset,\n      yoffset: yoffset,\n      speed: speed\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * flick(xspeed, yspeed, swipe, cb) -> cb(err)\n * Flicks, starting anywhere on the screen.\n *\n * flick(element, xoffset, yoffset, speed, cb) -> cb(err)\n * Flicks, starting at element center.\n *\n * @jsonWire POST /session/:sessionId/touch/flick\n */\ncommands.flick = function () {\n  var args = __slice.call(arguments, 0);\n  if (args.length <= 4) {\n    _flick1.apply(this, args);\n  } else {\n    _flick2.apply(this, args);\n  }\n};\n\n/**\n * tapElement(element) -> cb(err)\n * Taps element\n *\n * @jsonWire POST /session/:sessionId/touch/click\n */\ncommands.tapElement = function (element, cb) {\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/click',\n    data: {\n      element: element.value.toString()\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * performTouchAction(touchAction) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/perform\n */\ncommands.performTouchAction = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    touchAction = fargs.all[0];\n  try {\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/perform',\n      data: {\n        actions: touchAction.toJSON()\n      },\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * performMultiAction(element, multiAction) -> cb(err, touchStateObjects)\n * performMultiAction(multiAction) -> cb(err, touchStateObjects)\n *\n * @jsonWire POST /session/:sessionId/touch/multi/perform\n */\ncommands.performMultiAction = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    element = fargs.all[0],\n    multiTouchAction = fargs.all[1];\n  if (!multiTouchAction) {\n    multiTouchAction = element;\n    element = null;\n  }\n  element = element || multiTouchAction.element;\n  try {\n    var data = multiTouchAction.toJSON(element);\n    if (element) {\n      data.elementId = element.value.toString();\n    }\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/multi/perform',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * performW3CActions(actions) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/actions\n */\ncommands.performW3CActions = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    actions = fargs.all[0];\n  try {\n    var data = actions.toJSON();\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/actions',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\ncommands.releaseW3CActions = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  try {\n    _this._jsonWireCall({\n      method: 'DELETE',\n      relPath: '/actions',\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * moveTo(element, xoffset, yoffset, cb) -> cb(err)\n * Move to element, element may be null, xoffset and y offset\n * are optional.\n *\n * @jsonWire POST /session/:sessionId/moveto\n */\ncommands.moveTo = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    element = fargs.all[0],\n    xoffset = fargs.all[1],\n    yoffset = fargs.all[2];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/moveto',\n    data: {\n      element: element ? element.toString() : null,\n      xoffset: xoffset,\n      yoffset: yoffset\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * buttonDown(button ,cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttondown\n */\ncommands.buttonDown = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/buttondown',\n    data: {\n      button: button\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * buttonUp(button, cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttonup\n */\ncommands.buttonUp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/buttonup',\n    data: {\n      button: button\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * click(button, cb) -> cb(err)\n * Click on current element.\n * Buttons: {left: 0, middle: 1 , right: 2}\n *\n * @jsonWire POST /session/:sessionId/click\n */\ncommands.click = function () {\n  // parsing args, button optional\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/click',\n    data: {\n      button: button\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * doubleclick(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/doubleclick\n */\ncommands.doubleclick = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/doubleclick',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * type(element, keys, cb) -> cb(err)\n * Type keys (all keys are up at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/element/:id/value\n */\ncommands.type = function (element, keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  }\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function (key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/value',\n    data: {\n      value: keys,\n      text: keys.join('')\n    },\n    cb: simpleCallback(cb)\n  });\n};\ncommands.replace = function (element, keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  }\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function (key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/element/' + element + '/replace_value',\n    data: {\n      value: keys\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * submit(element, cb) -> cb(err)\n * Submit a `FORM` element.\n *\n * @jsonWire POST /session/:sessionId/element/:id/submit\n */\ncommands.submit = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/submit',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * keys(keys, cb) -> cb(err)\n * Press keys (keys may still be down at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/keys\n */\ncommands.keys = function (keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  }\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function (key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/keys',\n    data: {\n      value: keys\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * clear(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/clear\n */\ncommands.clear = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/clear',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * title(cb) -> cb(err, title)\n *\n * @jsonWire GET /session/:sessionId/title\n */\ncommands.title = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/title',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * source(cb) -> cb(err, source)\n *\n * @jsonWire GET /session/:sessionId/source\n */\ncommands.source = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/source',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n// element must be specified\nvar _rawText = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/text',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * text(element, cb) -> cb(err, text)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 1\n */\ncommands.text = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var element = fargs.all[0];\n  var _this = this;\n  if (!element || element === 'body') {\n    commands.element.apply(this, ['tag name', 'body', function (err, bodyEl) {\n      if (!err) {\n        _rawText.apply(_this, [bodyEl, cb]);\n      } else {\n        cb(err);\n      }\n    }]);\n  } else {\n    _rawText.apply(_this, [element, cb]);\n  }\n};\n\n/**\n * Check if text is present:\n * textPresent(searchText, element, cb) -> cb(err, boolean)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 3\n */\ncommands.textPresent = function (searchText, element) {\n  var cb = findCallback(arguments);\n  commands.text.apply(this, [element, function (err, text) {\n    if (err) {\n      cb(err, null);\n    } else {\n      cb(err, text.indexOf(searchText) >= 0);\n    }\n  }]);\n};\n\n/**\n * alertText(cb) -> cb(err, text)\n *\n * @jsonWire GET /session/:sessionId/alert_text\n */\ncommands.alertText = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/alert_text',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * alertKeys(keys, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/alert_text\n */\ncommands.alertKeys = function (keys) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/alert_text',\n    data: {\n      text: keys\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * acceptAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/accept_alert\n */\ncommands.acceptAlert = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/accept_alert',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * dismissAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/dismiss_alert\n */\ncommands.dismissAlert = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/dismiss_alert',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * active(cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element/active\n */\ncommands.active = function () {\n  var cb = findCallback(arguments);\n  var method = this.w3c ? 'GET' : 'POST';\n  this._jsonWireCall({\n    method: method,\n    relPath: '/element/active',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * url(cb) -> cb(err, url)\n *\n * @jsonWire GET /session/:sessionId/url\n */\ncommands.url = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/url',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * allCookies() -> cb(err, cookies)\n *\n * @jsonWire GET /session/:sessionId/cookie\n */\ncommands.allCookies = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/cookie',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setCookie(cookie, cb) -> cb(err)\n * cookie example:\n *  {name:'fruit', value:'apple'}\n * Optional cookie fields:\n *  path, domain, secure, expiry\n *\n * @jsonWire POST /session/:sessionId/cookie\n */\ncommands.setCookie = function (cookie) {\n  var cb = findCallback(arguments);\n  // setting secure otherwise selenium server throws\n  if (cookie) {\n    cookie.secure = cookie.secure || false;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/cookie',\n    data: {\n      cookie: cookie\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * deleteAllCookies(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie\n */\ncommands.deleteAllCookies = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE',\n    relPath: '/cookie',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * deleteCookie(name, cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie/:name\n */\ncommands.deleteCookie = function (name) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE',\n    relPath: '/cookie/' + encodeURIComponent(name),\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire GET /session/:sessionId/orientation\n */\ncommands.getOrientation = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/orientation',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire POST /session/:sessionId/orientation\n */\ncommands.setOrientation = function (orientation) {\n  orientation = orientation.toUpperCase();\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/orientation',\n    data: {\n      orientation: orientation\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setLocalStorageKey(key, value, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire POST /session/:sessionId/local_storage\n */\ncommands.setLocalStorageKey = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    key = fargs.all[0],\n    value = fargs.all[1];\n  commands.safeExecute.apply(this, [\"localStorage.setItem(arguments[0], arguments[1])\", [key, value], cb]);\n};\n\n/**\n * getLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeEval() due to localStorage bug in Selenium\n *\n * @jsonWire GET /session/:sessionId/local_storage/key/:key\n */\ncommands.getLocalStorageKey = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    key = fargs.all[0];\n  commands.safeEval.apply(this, [\"localStorage.getItem('\" + key + \"')\", cb]);\n};\n\n/**\n * removeLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage/key/:key\n */\ncommands.removeLocalStorageKey = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    key = fargs.all[0];\n  commands.safeExecute.apply(this, [\"localStorage.removeItem(arguments[0])\", [key], cb]);\n};\n\n/**\n * clearLocalStorage(cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage\n */\ncommands.clearLocalStorage = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  commands.safeExecute.apply(this, [\"localStorage.clear()\", cb]);\n};\n\n// deprecated\nvar _isVisible1 = function (element) {\n  var cb = findCallback(arguments);\n  commands.getComputedCSS.apply(this, [element, \"display\", function (err, display) {\n    if (err) {\n      return cb(err);\n    }\n    cb(null, display !== \"none\");\n  }]);\n};\n\n// deprecated\nvar _isVisible2 = function (queryType, querySelector) {\n  var cb = findCallback(arguments);\n  commands.elementIfExists.apply(this, [queryType, querySelector, function (err, element) {\n    if (err) {\n      return cb(err);\n    }\n    if (element) {\n      element.isVisible(cb);\n    } else {\n      cb(null, false);\n    }\n  }]);\n};\n\n// deprecated\ncommands.isVisible = function () {\n  deprecator.warn('isVisible', 'isVisible has been deprecated, use isDisplayed instead.');\n  var args = __slice.call(arguments, 0);\n  if (args.length <= 2) {\n    _isVisible1.apply(this, args);\n  } else {\n    _isVisible2.apply(this, args);\n  }\n};\n\n/**\n * Retrieves the pageIndex element (added for Appium):\n * getPageIndex(element, cb) -> cb(err, pageIndex)\n */\ncommands.getPageIndex = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/pageIndex',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getLocation(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location\n */\ncommands.getLocation = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/location',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getLocationInView(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location_in_view\n */\ncommands.getLocationInView = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/location_in_view',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getSize(element, cb) -> cb(err, size)\n *\n * @jsonWire GET /session/:sessionId/element/:id/size\n */\ncommands.getSize = function (element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/size',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Uploads a local file using undocumented\n * POST /session/:sessionId/file\n * uploadFile(filepath, cb) -> cb(err, filepath)\n */\ncommands.uploadFile = function (filepath) {\n  var cb = findCallback(arguments);\n  var _this = this;\n  var archiver = require('archiver');\n  var archive = archiver('zip');\n  var dataList = [];\n  archive.on('error', function (err) {\n    cb(err);\n  }).on('data', function (data) {\n    dataList.push(data);\n  }).on('end', function () {\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/file',\n      data: {\n        file: Buffer.concat(dataList).toString('base64')\n      },\n      cb: callbackWithData(cb, _this)\n    });\n  });\n  archive.append(fs.createReadStream(filepath), {\n    name: path.basename(filepath)\n  });\n  archive.finalize(function (err) {\n    if (err) {\n      cb(err);\n    }\n  });\n};\ncommands.waitForJsCondition = function () {\n  deprecator.warn('waitForJsCondition', 'waitForJsCondition has been deprecated, use waitFor + jsCondition asserter instead.');\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var jsConditionExpr = fargs.all[0],\n    timeout = fargs.all[1],\n    pollFreq = fargs.all[2];\n  commands.waitFor.apply(this, [{\n    asserter: asserters.jsCondition(jsConditionExpr, true),\n    timeout: timeout,\n    pollFreq: pollFreq\n  }, function (err, value) {\n    if (err && err.message && err.message.match(/Condition/)) {\n      cb(new Error(\"Element condition wasn't satisfied!\"));\n    } else {\n      cb(err, value);\n    }\n  }]);\n};\ncommands.waitForCondition = commands.waitForJsCondition;\n\n/**\n * Waits for JavaScript condition to be true (async script polling within browser):\n * waitForConditionInBrowser(conditionExpr, timeout, pollFreq, cb) -> cb(err, boolean)\n * conditionExpr: condition expression, should return a boolean\n * timeout and  pollFreq are optional, default: 1000/100.\n * return true if condition satisfied, error otherwise.\n */\ncommands.waitForConditionInBrowser = function () {\n  var _this = this;\n  // parsing args\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    conditionExpr = fargs.all[0],\n    timeout = fargs.all[1] || 1000,\n    poll = fargs.all[2] || 100;\n\n  // calling script\n  commands.safeExecuteAsync.apply(_this, [_waitForConditionInBrowserJsScript, [conditionExpr, timeout, poll], function (err, res) {\n    if (err) {\n      return cb(err);\n    }\n    if (res !== true) {\n      return cb(\"waitForConditionInBrowser failure for: \" + conditionExpr);\n    }\n    cb(null, res);\n  }]);\n};\n\n/**\n * sauceJobUpdate(jsonData, cb) -> cb(err)\n */\ncommands.sauceJobUpdate = function () {\n  var fargs = utils.varargs(arguments);\n  this._sauceJobUpdate.apply(this, fargs.array);\n};\n\n/**\n * sauceJobStatus(hasPassed, cb) -> cb(err)\n */\ncommands.sauceJobStatus = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    hasPassed = fargs.all[0];\n  this._sauceJobUpdate.apply(this, [{\n    passed: hasPassed\n  }, cb]);\n};\n\n/**\n * sleep(ms, cb) -> cb(err)\n */\ncommands.sleep = function (ms, cb) {\n  cb = cb || function () {};\n  setTimeout(cb, ms);\n};\n\n/**\n * noop(cb) -> cb(err)\n */\ncommands.noop = function (cb) {\n  if (cb) {\n    cb();\n  }\n};\n\n/**\n * shakeDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\ncommands.shakeDevice = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/shake',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * shake(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\ncommands.shake = commands.shakeDevice;\n\n/**\n * lockDevice(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.lockDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    seconds = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/lock',\n    data: {\n      seconds: seconds\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * lock(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.lock = commands.lockDevice;\n\n/**\n * unlockDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.unlockDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/unlock',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * unlock(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.unlock = commands.unlockDevice;\n\n/**\n * isLocked(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/is_locked\n */\ncommands.isLocked = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/is_locked',\n    cb: callbackWithData(cb)\n  });\n};\n\n/**\n * deviceKeyEvent(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\ncommands.deviceKeyEvent = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    keycode = fargs.all[0],\n    metastate = fargs.all[1];\n  var data = {\n    keycode: keycode\n  };\n  if (metastate) {\n    data.metastate = metastate;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/keyevent',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * pressDeviceKey(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\ncommands.pressDeviceKey = commands.deviceKeyEvent;\n\n/**\n * pressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/press_keycode\n */\ncommands.pressKeycode = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    keycode = fargs.all[0],\n    metastate = fargs.all[1],\n    flags = fargs.all[2];\n  var data = {\n    keycode: keycode\n  };\n  if (metastate) {\n    data.metastate = metastate;\n  }\n  if (flags) {\n    var f = 0;\n    flags.forEach(function (value) {\n      f = f | value;\n    });\n    data.flags = f;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/press_keycode',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * longPressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/long_press_keycode\n */\ncommands.longPressKeycode = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    keycode = fargs.all[0],\n    metastate = fargs.all[1],\n    flags = fargs.all[2];\n  var data = {\n    keycode: keycode\n  };\n  if (metastate) {\n    data.metastate = metastate;\n  }\n  if (flags) {\n    var f = 0;\n    flags.forEach(function (value) {\n      f = f | value;\n    });\n    data.flags = f;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/long_press_keycode',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * rotateDevice(element, opts, cb) -> cb(err)\n * rotateDevice(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\ncommands.rotateDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    element = fargs.all[0],\n    opts = fargs.all[1];\n  if (!(element && element.value)) {\n    opts = element;\n    element = null;\n  }\n  var data = _.clone(opts);\n  if (element) {\n    data.element = element.value.toString();\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/rotate',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * rotate(element, opts, cb) -> cb(err)\n * rotate(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\ncommands.rotate = commands.rotateDevice;\n\n/**\n * getCurrentDeviceActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\ncommands.getCurrentDeviceActivity = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/current_activity',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getCurrentActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\ncommands.getCurrentActivity = commands.getCurrentDeviceActivity;\n\n/**\n * getCurrentPackage(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_package\n */\ncommands.getCurrentPackage = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/current_package',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * installAppOnDevice(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\ncommands.installAppOnDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    appPath = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/install_app',\n    data: {\n      appPath: appPath\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * installApp(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\ncommands.installApp = commands.installAppOnDevice;\n\n/**\n * activateApp(cb) -> cb(err)\n *\n * POST /session/:session_id/appium/device/activate_app\n */\ncommands.activateApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    appId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/activate_app',\n    data: {\n      appId: appId\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * removeAppFromDevice(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\ncommands.removeAppFromDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    appId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/remove_app',\n    data: {\n      appId: appId\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * removeApp(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\ncommands.removeApp = commands.removeAppFromDevice;\n\n/**\n * isAppInstalledOnDevice(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\ncommands.isAppInstalledOnDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    bundleId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/app_installed',\n    data: {\n      bundleId: bundleId\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * isAppInstalled(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\ncommands.isAppInstalled = commands.isAppInstalledOnDevice;\n\n/**\n * isKeyboardShown() -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/is_keyboard_shown\n */\ncommands.isKeyboardShown = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/is_keyboard_shown',\n    cb: callbackWithData(cb)\n  });\n};\n\n/**\n * hideKeyboard() -> cb(err)\n * hideKeyboard(keyName, cb) -> cb(err)\n * hideKeyboard({strategy: 'pressKey', key:'<key>'}) -> cb(err)\n * hideKeyboard({strategy: 'tapOutside'}) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/hide_keyboard\n */\ncommands.hideDeviceKeyboard = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  var data = {};\n  switch (typeof fargs.all[0]) {\n    case 'string':\n      data = {\n        keyName: fargs.all[0]\n      };\n      break;\n    case 'object':\n      data = fargs.all[0];\n      break;\n    default:\n      data = null;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/hide_keyboard',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\ncommands.hideKeyboard = commands.hideDeviceKeyboard;\n\n/**\n * pushFileToDevice(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\ncommands.pushFileToDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    pathOnDevice = fargs.all[0],\n    base64Data = fargs.all[1];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/push_file',\n    data: {\n      path: pathOnDevice,\n      data: base64Data\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * pushFile(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\ncommands.pushFile = commands.pushFileToDevice;\n\n/**\n * pullFileFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\ncommands.pullFileFromDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    pathOnDevice = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/pull_file',\n    data: {\n      path: pathOnDevice\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * pullFile(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\ncommands.pullFile = commands.pullFileFromDevice;\n\n/**\n * pullFolderFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n */\ncommands.pullFolderFromDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    pathOnDevice = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/pull_folder',\n    data: {\n      path: pathOnDevice\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * pullFolder(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n */\ncommands.pullFolder = commands.pullFolderFromDevice;\n\n/**\n * toggleAirplaneModeOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleAirplaneModeOnDevice = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_airplane_mode',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleAirplaneMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleAirplaneMode = commands.toggleAirplaneModeOnDevice;\n/**\n * toggleFlightMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleFlightMode = commands.toggleAirplaneModeOnDevice;\n\n/**\n * toggleWiFiOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\ncommands.toggleWiFiOnDevice = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_wifi',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleWiFi(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\ncommands.toggleWiFi = commands.toggleWiFiOnDevice;\n\n/**\n * toggleLocationServicesOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\ncommands.toggleLocationServicesOnDevice = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_location_services',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleLocationServices(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\ncommands.toggleLocationServices = commands.toggleLocationServicesOnDevice;\n\n/**\n * toggleDataOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\ncommands.toggleDataOnDevice = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_data',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleData(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\ncommands.toggleData = commands.toggleDataOnDevice;\n\n/**\n * launchApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/launch\n */\ncommands.launchApp = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/launch',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * closeApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/close\n */\ncommands.closeApp = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/close',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * resetApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/reset\n */\ncommands.resetApp = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/reset',\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * backgroundApp(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/background\n */\ncommands.backgroundApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    seconds = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/background',\n    data: {\n      seconds: seconds\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * endTestCoverageForApp(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endTestCoverageForApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    intent = fargs.all[0],\n    path = fargs.all[1];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/end_test_coverage',\n    data: {\n      intent: intent,\n      path: path\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * endTestCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endTestCoverage = commands.endTestCoverageForApp;\n/**\n * endCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endCoverage = commands.endTestCoverageForApp;\n\n/**\n * complexFindInApp(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\ncommands.complexFindInApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    selector = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/complex_find',\n    data: {\n      selector: selector\n    },\n    cb: elementOrElementsCallback(cb, this)\n  });\n};\n\n/**\n * complexFind(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\ncommands.complexFind = commands.complexFindInApp;\n\n/**\n * getAppStrings(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/strings\n */\ncommands.getAppStrings = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    language = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/strings',\n    data: {\n      language: language\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setImmediateValueInApp(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\ncommands.setImmediateValueInApp = function (element, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/element/' + element.value.toString() + '/value',\n    data: {\n      value: value\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * startActivity(options, cb) -> cb(err)\n * Start an arbitrary Android activity during a session. The 'options' parameter should\n * implement the interface {appPackage, appActivity, [appWaitPackage], [appWaitActivity]}.\n *\n * @jsonWire POST /session/:sessionId/appium/device/start_activity\n */\ncommands.startActivity = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    options = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/start_activity',\n    data: options,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setImmediateValue(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\ncommands.setImmediateValue = commands.setImmediateValueInApp;\n\n/**\n * setNetworkConnection(type, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/network_connection\n */\ncommands.setNetworkConnection = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/network_connection',\n    data: {\n      parameters: {\n        type: fargs.all[0]\n      }\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getNetworkConnection(cb) -> cb(err, networkConnectionInfo)\n *\n * @jsonWire GET /session/:sessionId/network_connection\n */\ncommands.getNetworkConnection = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/network_connection',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * openNotifications(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/open_notifications\n */\ncommands.openNotifications = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/open_notifications',\n    cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * settings(cb) -> cb(err, settingsObject)\n *\n * @jsonWire GET /session/:sessionId/appium/settings\n */\ncommands.settings = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/settings',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * updateSettings(settingsObject, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/settings\n */\ncommands.updateSettings = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/settings',\n    data: {\n      settings: fargs.all[0]\n    },\n    cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * availableIMEEngines(cb) -> cb(err, engines)\n *\n * @jsonWire GET /session/:sessionId/ime/available_engines\n */\ncommands.availableIMEEngines = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/ime/available_engines',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * activateIMEEngine(cb, engine) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/activate\n */\ncommands.activateIMEEngine = function (engine) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/ime/activate',\n    data: {\n      engine: engine\n    },\n    cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * deactivateIMEEngine(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/deactivate\n */\ncommands.deactivateIMEEngine = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/ime/deactivate',\n    cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * activatedIMEEngine(cb) -> cb(err, active)\n *\n * @jsonWire GET /session/:sessionId/ime/activated\n */\ncommands.isIMEActive = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/ime/activated',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * activeIMEEngine(cb) -> cb(err, activeEngine)\n *\n * @jsonWire GET /session/:sessionId/ime/active_engine\n */\ncommands.activeIMEEngine = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/ime/active_engine',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getDeviceTime(cb) -> cb(err, deviceTime)\n *\n * @jsonWire GET /session/:sessionId/appium/device/system_time\n */\ncommands.getDeviceTime = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/system_time',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\ncommands.touchId = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    match = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/simulator/touch_id',\n    cb: callbackWithData(cb, this),\n    data: {\n      match: match\n    }\n  });\n};\n\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\ncommands.toggleTouchIdEnrollment = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/simulator/toggle_touch_id_enrollment',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * fingerprint(fingerprintId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/finger_print\n */\ncommands.fingerprint = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    fingerprintId = fargs.all[0];\n  var data = {\n    fingerprintId: fingerprintId\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/finger_print',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * sendSms(phoneNumber, message, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/send_sms\n */\ncommands.sendSms = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    phoneNumber = fargs.all[0],\n    message = fargs.all[1];\n  var data = {\n    phoneNumber: phoneNumber,\n    message: message\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/send_sms',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * gsmCall(phoneNumber, action, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_call\n */\ncommands.gsmCall = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    phoneNumber = fargs.all[0],\n    action = fargs.all[1];\n  var data = {\n    phoneNumber: phoneNumber,\n    action: action\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/gsm_call',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * gsmSignal(signalStrength, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_signal\n */\ncommands.gsmSignal = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    signalStrength = fargs.all[0];\n  var data = {\n    signalStrength: signalStrength\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/gsm_signal',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\ncommands.gsmSignalStrength = commands.gsmSignal;\n\n/**\n * gsmVoice(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_voice\n */\ncommands.gsmVoice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    state = fargs.all[0];\n  var data = {\n    state: state\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/gsm_voice',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\ncommands.gsmVoiceState = commands.gsmVoice;\n\n/**\n * powerCapacity(percent, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_capacity\n */\ncommands.powerCapacity = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    percent = fargs.all[0];\n  var data = {\n    percent: percent\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/power_capacity',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * powerAC(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_ac\n */\ncommands.powerAC = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    state = fargs.all[0];\n  var data = {\n    state: state\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/power_ac',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\ncommands.powerChargerState = commands.powerAC;\n\n/**\n * networkSpeed(netspeed, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/network_speed\n */\ncommands.networkSpeed = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    netspeed = fargs.all[0];\n  var data = {\n    netspeed: netspeed\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/network_speed',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getClipboard(contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/get_clipboard\n */\ncommands.getClipboard = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    contentType = fargs.all[0];\n  var data = {\n    contentType: contentType\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/get_clipboard',\n    data: data,\n    cb: callbackWithData(cb)\n  });\n};\n\n/**\n * setClipboard(content, contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/set_clipboard\n */\ncommands.setClipboard = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    content = fargs.all[0],\n    contentType = fargs.all[1];\n  var data = {\n    content: content,\n    contentType: contentType\n  };\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/set_clipboard',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getSupportedPerformanceDataTypes(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/performanceData/types\n */\ncommands.getSupportedPerformanceDataTypes = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/performanceData/types',\n    cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getPerformanceData(packageName, dataType, dataReadTimeout, cb) -> cb(err)\n * dataReadTimeout is optional.\n *\n * @jsonWire POST /session/:sessionId/appium/getPerformanceData\n */\ncommands.getPerformanceData = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    packageName = fargs.all[0],\n    dataType = fargs.all[1],\n    dataReadTimeout = fargs.all[2];\n  var data = {\n    packageName: packageName,\n    dataType: dataType\n  };\n  if (dataReadTimeout) {\n    data.dataReadTimeout = dataReadTimeout;\n  }\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/getPerformanceData',\n    data: data,\n    cb: callbackWithData(cb, this)\n  });\n};\ncommands.elementsByImageFile = function () {\n  var fargs = utils.varargs(arguments);\n  var _this = this;\n  var cb = fargs.callback,\n    imgPath = fargs.all[0];\n  _this.elementByImageFile(imgPath, true, cb);\n};\ncommands.elementByImageFile = function () {\n  var fargs = utils.varargs(arguments);\n  var _this = this;\n  var cb = fargs.callback,\n    imgPath = fargs.all[0],\n    multiple = fargs.all[1] || false;\n  fs.readFile(imgPath, function (err, fileData) {\n    if (err) {\n      return cb(err);\n    }\n    var elFn = multiple ? 'elementsByImage' : 'elementByImage';\n    _this[elFn](fileData.toString('base64'), cb);\n  });\n};\nmodule.exports = commands;","map":{"version":3,"names":["fs","require","url","path","tmp","_","async","__slice","Array","prototype","slice","config","callbacks","callbackWithData","simpleCallback","elementCallback","elementsCallback","elementOrElementsCallback","utils","findCallback","codeToString","deprecator","asserters","Asserter","safeExecuteJsScript","safeExecuteAsyncJsScript","_waitForConditionInBrowserJsScript","commands","init","args","call","arguments","_init","apply","status","cb","_jsonWireCall","method","absPath","sessions","getSessionId","sessionID","getSessionID","execute","fargs","varargs","callback","code","all","relPath","data","script","safeExecute","eval","err","res","safeEval","executeAsync","safeExecuteAsync","altSessionCapabilities","_this","filter","session","id","capabilities","sessionCapabilities","newWindow","name","close","currentContext","context","contextRef","contexts","window","windowRef","frame","frameRef","value","ELEMENT","w3cElementKeyId","windowName","windowHandle","windowHandles","getGeoLocation","setGeoLocation","lat","lon","alt","location","latitude","longitude","altitude","scroll","xOffset","yOffset","xoffset","yoffset","logTypes","log","logType","type","quit","emit","event","message","get","_url","_httpConfig","baseUrl","resolve","refresh","maximize","win","windowSize","width","height","getWindowSize","setWindowSize","getWindowPosition","setWindowPosition","x","y","forward","back","setHttpTimeout","warn","ms","configureHttp","timeout","setHTTPInactivityTimeout","opts","_configureHttp","setImplicitWaitTimeout","setWaitTimeout","setAsyncScriptTimeout","setPageLoadTimeout","setCommandTimeout","element","using","elementOrNull","elements","length","elementIfExists","hasElement","waitFor","asserter","pollFreq","Error","endTime","Date","now","unpromisedAsserter","browser","promise","assert","then","retriable","poll","isFinalCheck","satisfied","indexOf","setTimeout","bind","waitForElement","el","wrappedAsserter","els","seq","satisfiedEl","each","push","series","isUndefined","match","waitForElements","satisfiedEls","waitForVisible","isVisible","takeScreenshot","saveScreenshot","_path","buildFilePath","tmpdir","tmpName","template","fileName","join","extname","filePath","base64Data","writeFile","addMethodsForSuffix","singular","plural","elFuncSuffix","unshift","elFuncFullType","elementFuncTypes","suffix","getTagName","getAttribute","attrName","isDisplayed","displayed","isEnabled","enabled","isSelected","getValue","clickElement","getComputedCss","cssProperty","getComputedCSS","equalsElement","other","_flick1","xspeed","yspeed","swipe","_flick2","speed","flick","tapElement","toString","performTouchAction","touchAction","actions","toJSON","performMultiAction","multiTouchAction","elementId","performW3CActions","releaseW3CActions","moveTo","buttonDown","button","buttonUp","click","doubleclick","keys","isArray","key","idx","text","replace","submit","clear","title","source","_rawText","bodyEl","textPresent","searchText","alertText","alertKeys","acceptAlert","dismissAlert","active","w3c","allCookies","setCookie","cookie","secure","deleteAllCookies","deleteCookie","encodeURIComponent","getOrientation","setOrientation","orientation","toUpperCase","setLocalStorageKey","getLocalStorageKey","removeLocalStorageKey","clearLocalStorage","_isVisible1","display","_isVisible2","queryType","querySelector","getPageIndex","getLocation","getLocationInView","getSize","uploadFile","filepath","archiver","archive","dataList","on","file","Buffer","concat","append","createReadStream","basename","finalize","waitForJsCondition","jsConditionExpr","jsCondition","waitForCondition","waitForConditionInBrowser","conditionExpr","sauceJobUpdate","_sauceJobUpdate","array","sauceJobStatus","hasPassed","passed","sleep","noop","shakeDevice","shake","lockDevice","seconds","lock","unlockDevice","unlock","isLocked","deviceKeyEvent","keycode","metastate","pressDeviceKey","pressKeycode","flags","f","forEach","longPressKeycode","rotateDevice","clone","rotate","getCurrentDeviceActivity","getCurrentActivity","getCurrentPackage","installAppOnDevice","appPath","installApp","activateApp","appId","removeAppFromDevice","removeApp","isAppInstalledOnDevice","bundleId","isAppInstalled","isKeyboardShown","hideDeviceKeyboard","keyName","hideKeyboard","pushFileToDevice","pathOnDevice","pushFile","pullFileFromDevice","pullFile","pullFolderFromDevice","pullFolder","toggleAirplaneModeOnDevice","toggleAirplaneMode","toggleFlightMode","toggleWiFiOnDevice","toggleWiFi","toggleLocationServicesOnDevice","toggleLocationServices","toggleDataOnDevice","toggleData","launchApp","closeApp","resetApp","backgroundApp","endTestCoverageForApp","intent","endTestCoverage","endCoverage","complexFindInApp","selector","complexFind","getAppStrings","language","setImmediateValueInApp","startActivity","options","setImmediateValue","setNetworkConnection","parameters","getNetworkConnection","openNotifications","settings","updateSettings","availableIMEEngines","activateIMEEngine","engine","deactivateIMEEngine","isIMEActive","activeIMEEngine","getDeviceTime","touchId","toggleTouchIdEnrollment","fingerprint","fingerprintId","sendSms","phoneNumber","gsmCall","action","gsmSignal","signalStrength","gsmSignalStrength","gsmVoice","state","gsmVoiceState","powerCapacity","percent","powerAC","powerChargerState","networkSpeed","netspeed","getClipboard","contentType","setClipboard","content","getSupportedPerformanceDataTypes","getPerformanceData","packageName","dataType","dataReadTimeout","elementsByImageFile","imgPath","elementByImageFile","multiple","readFile","fileData","elFn","module","exports"],"sources":["/Users/apps/node_modules/wd/lib/commands.js"],"sourcesContent":["var fs = require(\"fs\"),\n    url = require('url'),\n    path = require('path'),\n    tmp = require('./tmp'),\n    _ = require(\"lodash\"),\n    async = require('async'),\n    __slice = Array.prototype.slice,\n    config = require('./config'),\n    callbacks = require(\"./callbacks\"),\n    callbackWithData = callbacks.callbackWithData,\n    simpleCallback = callbacks.simpleCallback,\n    elementCallback = callbacks.elementCallback,\n    elementsCallback = callbacks.elementsCallback,\n    elementOrElementsCallback = callbacks.elementOrElementsCallback,\n    utils = require(\"./utils\"),\n    findCallback = utils.findCallback,\n    codeToString = utils.codeToString,\n    deprecator = utils.deprecator,\n    asserters = require(\"./asserters\"),\n    Asserter = asserters.Asserter,\n    safeExecuteJsScript = require('../build/safe-execute'),\n    safeExecuteAsyncJsScript = require('../build/safe-execute-async'),\n    _waitForConditionInBrowserJsScript = require('../build/wait-for-cond-in-browser');\n\nvar commands = {};\n\n/**\n * init(desired, cb) -> cb(err, sessionID, capabilities)\n * Initialize the browser. capabilities return may be\n * absent, depending on driver.\n *\n * @jsonWire POST /session\n */\ncommands.init = function() {\n  var args = __slice.call(arguments, 0);\n  this._init.apply(this, args);\n};\n\n/**\n * status(cb) -> cb(err, status)\n *\n * @jsonWire GET /status\n */\ncommands.status = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , absPath: 'status'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * sessions(cb) -> cb(err, sessions)\n *\n * @jsonWire GET /sessions\n */\ncommands.sessions = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , absPath: 'sessions'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Retrieves the current session id.\n * getSessionId(cb) -> cb(err, sessionId)\n * getSessionId()\n */\ncommands.getSessionId = function() {\n  var cb = findCallback(arguments);\n  if(cb) { cb(null, this.sessionID); }\n  return this.sessionID;\n};\n\ncommands.getSessionID = commands.getSessionId;\n\n/**\n * execute(code, args, cb) -> cb(err, result)\n * execute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 1\n */\ncommands.execute = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute'\n    , cb: callbackWithData(cb, this)\n    , data: {script: code, args: args}\n  });\n};\n\n/**\n * Safely execute script within an eval block, always returning:\n * safeExecute(code, args, cb) -> cb(err, result)\n * safeExecute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 2\n */\ncommands.safeExecute = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute'\n    , cb: callbackWithData(cb, this)\n    , data: {script: safeExecuteJsScript, args: [code, args]}\n  });\n};\n\n/**\n * Evaluate expression (using execute):\n * eval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\n(function() {\n  commands.eval = function(code) {\n    var cb = findCallback(arguments);\n    code = codeToString(code);\n    code = \"return \" + code + \";\";\n    commands.execute.apply(this, [code, function(err, res) {\n      if(err) {return cb(err);}\n      cb(null, res);\n    }]);\n  };\n})();\n\n/**\n * Safely evaluate expression, always returning  (using safeExecute):\n * safeEval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\ncommands.safeEval = function(code) {\n  var cb = findCallback(arguments);\n  code = codeToString(code);\n  commands.safeExecute.apply(this, [code, function(err, res) {\n    if(err) {return cb(err);}\n    cb(null, res);\n  }]);\n};\n\n/**\n * executeAsync(code, args, cb) -> cb(err, result)\n * executeAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\n  commands.executeAsync = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute_async'\n    , cb: callbackWithData(cb, this)\n    , data: {script: code, args: args}\n  });\n};\n\n/**\n * Safely execute async script within an eval block, always returning:\n * safeExecuteAsync(code, args, cb) -> cb(err, result)\n * safeExecuteAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\ncommands.safeExecuteAsync = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute_async'\n    , cb: callbackWithData(cb, this)\n    , data: {script: safeExecuteAsyncJsScript , args: [code, args]}\n  });\n};\n\n/**\n * Alternate strategy to get session capabilities from server session list:\n * altSessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /sessions\n */\ncommands.altSessionCapabilities = function() {\n  var cb = findCallback(arguments);\n  var _this = this;\n  // looking for the current session\n  commands.sessions.apply(this, [function(err, sessions) {\n    if(err) {\n      cb(err, sessions);\n    } else {\n      sessions = sessions.filter(function(session) {\n        return session.id === _this.sessionID;\n      });\n      cb(null, sessions[0]? sessions[0].capabilities : 0);\n    }\n  }]);\n};\n\n/**\n * sessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /session/:sessionId\n */\ncommands.sessionCapabilities = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    // default url\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Opens a new window (using Javascript window.open):\n * newWindow(url, name, cb) -> cb(err)\n * newWindow(url, cb) -> cb(err)\n * name: optional window name\n * Window can later be accessed by name with the window method,\n * or by getting the last handle returned by the windowHandles method.\n */\ncommands.newWindow = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      url =  fargs.all[0],\n      name = fargs.all[1];\n  commands.execute.apply(\n    this,\n    [ \"var url=arguments[0], name=arguments[1]; window.open(url, name);\",\n      [url,name] , cb]);\n};\n\n/**\n * close(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/window\n */\ncommands.close = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    , relPath: '/window'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * currentContext(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/context\n */\ncommands.currentContext = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/context'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * context(contextRef, cb) -> cb(err, context)\n *\n * @jsonWire POST /session/:sessionId/context\n */\ncommands.context = function(contextRef) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/context'\n    , cb: simpleCallback(cb)\n    , data: { name: contextRef }\n  });\n};\n\n/**\n * contexts(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/contexts\n */\ncommands.contexts = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/contexts'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * window(name, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/window\n */\ncommands.window = function(windowRef) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/window'\n    , cb: simpleCallback(cb)\n    , data: { name: windowRef }\n  });\n};\n\n/**\n * frame(frameRef, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/frame\n */\ncommands.frame = function(frameRef) {\n  var cb = findCallback(arguments);\n  // avoid using this, Webdriver seems very buggy\n  // doesn't work at all with chromedriver\n  if(typeof(frameRef) === 'function'){\n    frameRef = null;\n  }\n  if(frameRef !== null && typeof(frameRef.value) !== \"undefined\"){\n    // we have an element object\n    frameRef = {ELEMENT: frameRef.value};\n    frameRef[utils.w3cElementKeyId] = frameRef.value;\n  }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/frame'\n    , cb: simpleCallback(cb)\n    , data: { id: frameRef }\n  });\n};\n\n/**\n * windowName(cb) -> cb(err, name)\n */\ncommands.windowName = function() {\n  var cb = findCallback(arguments);\n  commands.eval.apply(this, [\"window.name\", cb]);\n};\n\n/**\n * windowHandle(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/window_handle\n */\ncommands.windowHandle = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/window_handle'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * windowHandles(cb) -> cb(err, arrayOfHandles)\n *\n * @jsonWire GET /session/:sessionId/window_handles\n */\ncommands.windowHandles = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/window_handles'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getGeoLocation(cb) -> cb(err, geoLocationObj)\n *\n * @jsonWire GET /session/:sessionId/location\n */\ncommands.getGeoLocation = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/location'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setGeoLocation(lat, lon, alt, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/location\n */\ncommands.setGeoLocation = function(lat, lon, alt) {\n  var cb = findCallback(arguments);\n  if(typeof(alt) === 'function'){\n    alt = 0;\n  }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/location'\n    , cb: simpleCallback(cb)\n    , data: {location :{latitude: lat, longitude: lon, altitude: alt }}\n  });\n};\n\n/**\n * scroll(xOffset, yOffset, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/scroll\n */\ncommands.scroll = function(xOffset, yOffset) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/scroll'\n    , cb: simpleCallback(cb, this)\n    , data: { xoffset: xOffset, yoffset: yOffset }\n  });\n};\n\n\n/**\n * logTypes(cb) -> cb(err, arrayOfLogTypes)\n *\n * @jsonWire GET /session/:sessionId/log/types\n */\ncommands.logTypes = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/log/types'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * log(logType, cb) -> cb(err, arrayOfLogs)\n *\n * @jsonWire POST /session/:sessionId/log\n */\ncommands.log = function(logType) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/log'\n    , cb: callbackWithData(cb, this)\n    , data: { type: logType }\n  });\n};\n\n/**\n * quit(cb) -> cb(err)\n * Destroy the browser.\n *\n * @jsonWire DELETE /session/:sessionId\n */\ncommands.quit = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    // default url\n    , emit: {event: 'status', message: '\\nEnding your web drivage..\\n'}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * get(url,cb) -> cb(err)\n * Get a new url.\n *\n * @jsonWire POST /session/:sessionId/url\n */\ncommands.get = function(_url) {\n  if(this._httpConfig.baseUrl) {_url = url.resolve(this._httpConfig.baseUrl, _url); }\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/url'\n    , data: {'url': _url}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * refresh(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/refresh\n */\ncommands.refresh = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/refresh'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * maximize(handle, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/maximize\n */\ncommands.maximize = function(win) {\nvar cb = findCallback(arguments);\nthis._jsonWireCall({\n\tmethod: 'POST'\n\t, relPath: '/window/'+ win + '/maximize'\n\t, cb: simpleCallback(cb)\n\t});\n};\n\n/**\n  * windowSize(handle, width, height, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\ncommands.windowSize = function(win, width, height) {\nvar cb = findCallback(arguments);\nthis._jsonWireCall({\n  method: 'POST'\n  , relPath: '/window/'+ win + '/size'\n  , data: {'width':width, 'height':height}\n  , cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * getWindowSize(handle, cb) -> cb(err, size)\n  * getWindowSize(cb) -> cb(err, size)\n  * handle: window handle to get size (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/size\n */\ncommands.getWindowSize = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      win = fargs.all[0] || 'current';\nthis._jsonWireCall({\n\tmethod: 'GET'\n\t, relPath: '/window/'+ win + '/size'\n\t, cb: callbackWithData(cb, this)\n\t});\n};\n\n/**\n  * setWindowSize(width, height, handle, cb) -> cb(err)\n  * setWindowSize(width, height, cb) -> cb(err)\n  * width: width in pixels to set size to\n  * height: height in pixels to set size to\n  * handle: window handle to set size for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\ncommands.setWindowSize = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      width = fargs.all[0],\n      height = fargs.all[1],\n      win = fargs.all[2] || 'current';\nthis._jsonWireCall({\n\tmethod: 'POST'\n\t, relPath: '/window/'+ win + '/size'\n    , cb: simpleCallback(cb)\n    , data: {width: width, height: height}\n\t});\n};\n\n/**\n  * getWindowPosition(handle, cb) -> cb(err, position)\n  * getWindowPosition(cb) -> cb(err, position)\n  * handle: window handle to get position (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/position\n */\ncommands.getWindowPosition = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      win = fargs.all[0] || 'current';\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/window/'+ win + '/position'\n    , cb: callbackWithData(cb, this)\n    });\n};\n\n/**\n  * setWindowPosition(x, y, handle, cb) -> cb(err)\n  * setWindowPosition(x, y, cb) -> cb(err)\n  * x: the x-coordinate in pixels to set the window position\n  * y: the y-coordinate in pixels to set the window position\n  * handle: window handle to set position for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/position\n */\ncommands.setWindowPosition = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      x = fargs.all[0],\n      y = fargs.all[1],\n      win = fargs.all[2] || 'current';\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/window/'+ win + '/position'\n    , cb: simpleCallback(cb)\n    , data: {x: x, y: y}\n  });\n};\n\n/**\n * forward(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/forward\n */\ncommands.forward = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/forward'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * back(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/back\n */\ncommands.back = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/back'\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.setHttpTimeout = function() {\n  deprecator.warn('setHttpTimeout',\n    'setHttpTimeout/setHTTPInactivityTimeout has been deprecated, use configureHttp instead.');\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      ms = fargs.all[0];\n  commands.configureHttp( {timeout: ms}, cb );\n};\n\ncommands.setHTTPInactivityTimeout = commands.setHttpTimeout;\n\n/**\n * configureHttp(opts)\n *\n * opts example:\n * {timeout:60000, retries: 3, 'retryDelay': 15, baseUrl='http://example.com/'}\n * more info in README.\n *\n */\ncommands.configureHttp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      opts = fargs.all[0];\n  config._configureHttp(this._httpConfig, opts);\n  if(cb) { cb(null); }\n};\n\n/**\n * setImplicitWaitTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/implicit_wait\n */\ncommands.setImplicitWaitTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts/implicit_wait'\n    , data: {ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n// for backward compatibility\ncommands.setWaitTimeout = commands.setImplicitWaitTimeout;\n\n/**\n * setAsyncScriptTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/async_script\n */\ncommands.setAsyncScriptTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts/async_script'\n    , data: {ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setPageLoadTimeout(ms, cb) -> cb(err)\n * (use setImplicitWaitTimeout and setAsyncScriptTimeout to set the other timeouts)\n *\n * @jsonWire POST /session/:sessionId/timeouts\n */\ncommands.setPageLoadTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts'\n    , data: {type: 'page load', ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setCommandTimeout(ms, cb) -> cb(err)\n * (this is for Appium only)\n * @jsonWire POST /session/:sessionId/timeouts\n */\ncommands.setCommandTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts'\n    , data: {type: 'command', ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * element(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element\n */\ncommands.element = function(using, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element'\n    , data: {using: using, value: value}\n    , cb: elementCallback(cb, this)\n  });\n};\n\n/**\n * Retrieve an element avoiding not found exception and returning null instead:\n * elementOrNull(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 3\n */\ncommands.elementOrNull = function(using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value,\n    function(err, elements) {\n      if(!err) {\n        if(elements.length>0) {cb(null,elements[0]);} else {cb(null,null);}\n      } else {\n        cb(err); }\n    }\n  ]);\n};\n\n/**\n * Retrieve an element avoiding not found exception and returning undefined instead:\n * elementIfExists(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 5\n */\ncommands.elementIfExists = function(using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value,\n    function(err, elements) {\n      if(!err) {\n        if(elements.length>0) {cb(null,elements[0]);} else {cb(null);}\n      } else {\n        cb(err); }\n    }\n  ]);\n};\n\n/**\n * elements(using, value, cb) -> cb(err, elements)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 1\n */\ncommands.elements = function(using, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/elements'\n    , data: {using: using, value: value}\n    , cb: elementsCallback(cb, this)\n  });\n};\n\n/**\n * Check if element exists:\n * hasElement(using, value, cb) -> cb(err, boolean)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 7\n */\ncommands.hasElement = function(using, value){\n  var cb = findCallback(arguments);\n  commands.elements.apply( this, [using, value, function(err, elements){\n    if(!err) {\n      cb(null, elements.length > 0 );\n    } else {\n      cb(err); }\n  }]);\n};\n\n/**\n * waitFor(asserter, timeout, pollFreq, cb) -> cb(err, return_value)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitFor(opts, cb) -> cb(err)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(browser , cb) -> cb(err, satisfied, return_value)\n */\ncommands.waitFor = function(){\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var opts;\n  // retrieving options\n  if(typeof fargs.all[0] === 'object' && !(fargs.all[0] instanceof Asserter)){\n    opts = fargs.all[0];\n  } else\n  {\n    opts = {\n      asserter: fargs.all[0],\n      timeout: fargs.all[1],\n      pollFreq: fargs.all[2]\n    };\n  }\n\n  // default\n  opts.timeout = opts.timeout || 1000;\n  opts.pollFreq = opts.pollFreq || 200;\n\n  if(!opts.asserter) { throw new Error('Missing asserter!'); }\n\n  var _this = this;\n  var endTime = Date.now() + opts.timeout;\n\n  var unpromisedAsserter = new Asserter(\n    function(browser, cb) {\n      var promise = opts.asserter.assert(browser, cb);\n      if(promise && promise.then && typeof promise.then === 'function'){\n        promise.then(\n          function(res) { cb(null, true, res); },\n          function(err) {\n            if(err.retriable) { cb(null, false); }\n            else { throw err; }\n          }\n        );\n      }\n    }\n  );\n\n  function poll(isFinalCheck){\n    unpromisedAsserter.assert(_this, function(err, satisfied, value) {\n      if(err && err.message.indexOf(\"timeout\") === -1) { return cb(err); }\n      if(satisfied) {\n        cb(null, value);\n      } else {\n        if(isFinalCheck) {\n          cb(err || new Error(\"Condition wasn't satisfied!\"));\n        } else if(Date.now() > endTime){\n          // trying one more time for safety\n          setTimeout(poll.bind(null, true) , opts.pollFreq);\n        } else {\n          setTimeout(poll, opts.pollFreq);\n        }\n      }\n    });\n  }\n\n  poll();\n};\n\n/**\n * waitForElement(using, value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n * waitForElement(using, value, timeout, pollFreq, cb) -> cb(err, el)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElement(using, value, opts, cb) -> cb(err, el)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\ncommands.waitForElement = function(){\n\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n      value = fargs.all[1];\n  var opts;\n\n  // retrieving options\n  if(typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)){\n    opts = fargs.all[2];\n  } else if(fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  }\n\n  // default\n  opts.asserter = opts.asserter || new Asserter(function(el, cb) { cb(null, true); });\n\n  var unpromisedAsserter = new Asserter(\n    function(el, cb) {\n      var promise = opts.asserter.assert(el, cb);\n      if(promise && promise.then && typeof promise.then === 'function'){\n        promise.then(\n          function() { cb(null, true); },\n          function(err) {\n            if(err.retriable) { cb(null, false); }\n            else { throw err; }\n          }\n        );\n      }\n    }\n  );\n\n  var wrappedAsserter = new Asserter(\n    function(browser, cb){\n      browser.elements(using, value, function(err, els){\n        if(err) { return cb(err); }\n        var seq = [];\n        var satisfiedEl;\n        _(els).each(function(el) {\n          seq.push(function(cb) {\n            if(satisfiedEl) { return cb(); }\n            unpromisedAsserter.assert(el, function(err, satisfied) {\n              if(err) { return cb(err); }\n              if(satisfied) { satisfiedEl = el; }\n              cb(err);\n            });\n          });\n        });\n        async.series(seq, function(err) {\n            if(err) { return cb(err); }\n            cb(err, !_.isUndefined(satisfiedEl)  , satisfiedEl);\n        });\n      });\n    }\n  );\n\n  commands.waitFor.apply(this,[\n    {\n      asserter: wrappedAsserter,\n      timeout: opts.timeout,\n      pollFreq: opts.pollFreq\n    }, function(err, value) {\n      if(err && err.message && err.message.match(/Condition/)) {\n        cb(new Error(\"Element condition wasn't satisfied!\"));\n      } else {\n        cb(err, value);\n      }\n    }]);\n};\n\n/**\n * waitForElements(using, value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n * waitForElements(using, value, timeout, pollFreq, cb) -> cb(err, els)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElements(using, value, opts, cb) -> cb(err, els)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\ncommands.waitForElements = function (){\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n      value = fargs.all[1];\n  var opts;\n\n  // retrieving options\n  if (typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)){\n    opts = fargs.all[2];\n  } else if (fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  }\n\n  // default\n  opts.asserter = opts.asserter || new Asserter(function(el, cb) { cb(null, true); });\n\n  var unpromisedAsserter = new Asserter(\n    function (el, cb) {\n      var promise = opts.asserter.assert(el, cb);\n      if (promise && promise.then && typeof promise.then === 'function') {\n        promise.then(\n          function() { cb(null, true); },\n          function(err) {\n            if (err.retriable) {\n              cb(null, false);\n            } else {\n              cb(err);\n            }\n          }\n        );\n      }\n    }\n  );\n\n  var wrappedAsserter = new Asserter(\n    function(browser, cb) {\n      browser.elements(using, value, function(err, els){\n        if (err) { return cb(err); }\n        var seq = [];\n        var satisfiedEls = [];\n        _(els).each(function (el) {\n          seq.push(function (cb) {\n            unpromisedAsserter.assert(el, function(err, satisfied) {\n              if(err) { return cb(err); }\n              if(satisfied) { satisfiedEls.push(el); }\n              cb();\n            });\n          });\n        });\n        async.series(seq, function(err) {\n          if(err) { return cb(err); }\n          cb(null, satisfiedEls.length > 0  , satisfiedEls);\n        });\n      });\n    }\n  );\n\n  commands.waitFor.apply(this,[\n    {\n      asserter: wrappedAsserter,\n      timeout: opts.timeout,\n      pollFreq: opts.pollFreq\n    }, function(err, value) {\n      if(err && err.message && err.message.match(/Condition/)) {\n        cb(new Error(\"Element condition wasn't satisfied!\"));\n      } else {\n        cb(err, value);\n      }\n    }]);\n};\n\ncommands.waitForVisible = function(using, value, timeout, pollFreq) {\n  deprecator.warn('waitForVisible',\n    'waitForVisible has been deprecated, use waitForElement + isVisible asserter instead.');\n\n  var cb = findCallback(arguments);\n\n  commands.waitForElement.apply(this, [using, value, asserters.isVisible, timeout, pollFreq, function(err, isVisible) {\n    if(err && err.message && err.message.match(/Element condition wasn't satisfied!/)){\n      cb(new Error(\"Element didn't become visible\"));\n    } else {\n      cb(err, isVisible);\n    }\n  }]);\n};\n\n/**\n * takeScreenshot(cb) -> cb(err, screenshot)\n *\n * @jsonWire GET /session/:sessionId/screenshot\n */\ncommands.takeScreenshot = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/screenshot'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * saveScreenshot(path, cb) -> cb(err, filePath)\n *\n * path maybe a full file path, a directory path (finishing with /),\n * the screenshot name, or left blank (will create a file in the system temp dir).\n */\ncommands.saveScreenshot = function() {\n  var _this = this;\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var _path = fargs.all[0];\n\n  function buildFilePath(_path, cb) {\n    if(!_path) { _path = tmp.tmpdir + '/'; }\n    if(_path.match(/.*\\/$/)) {\n      tmp.tmpName( {template: 'screenshot-XXXXXX.png'}, function(err, fileName) {\n        if(err) { return cb(err); }\n        cb(null, path.join( _path , fileName) );\n      });\n    } else {\n      if(path.extname(_path) === '') { _path = _path + '.png'; }\n      cb(null, _path);\n    }\n  }\n\n  buildFilePath(_path, function(err, filePath) {\n    commands.takeScreenshot.apply(_this, [function(err, base64Data) {\n      if(err) { return cb(err); }\n      require(\"fs\").writeFile(filePath, base64Data, 'base64', function(err) {\n        if(err) { return cb(err); }\n        cb(null, filePath);\n      });\n    }]);\n  });\n};\n\n// adding all elementBy... , elementsBy... function\n\nvar addMethodsForSuffix = function(type, singular, plural) {\n  if(singular){\n    /**\n     * elementByClassName(value, cb) -> cb(err, element)\n     * elementByCssSelector(value, cb) -> cb(err, element)\n     * elementById(value, cb) -> cb(err, element)\n     * elementByName(value, cb) -> cb(err, element)\n     * elementByLinkText(value, cb) -> cb(err, element)\n     * elementByPartialLinkText(value, cb) -> cb(err, element)\n     * elementByTagName(value, cb) -> cb(err, element)\n     * elementByXPath(value, cb) -> cb(err, element)\n     * elementByCss(value, cb) -> cb(err, element)\n     * elementByIosUIAutomation(value, cb) -> cb(err, element)\n     * elementByIosClassChain(value, cb) -> cb(err, element)\n     * elementByIosPredicateString(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomator(value, cb) -> cb(err, element)\n     * elementByAccessibilityId(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/element\n     */\n    commands['element' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.element.apply(this, args);\n    };\n\n    /**\n     * elementByClassNameOrNull(value, cb) -> cb(err, element)\n     * elementByCssSelectorOrNull(value, cb) -> cb(err, element)\n     * elementByIdOrNull(value, cb) -> cb(err, element)\n     * elementByNameOrNull(value, cb) -> cb(err, element)\n     * elementByLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByTagNameOrNull(value, cb) -> cb(err, element)\n     * elementByXPathOrNull(value, cb) -> cb(err, element)\n     * elementByCssOrNull(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationOrNull(value, cb) -> cb(err, element)\n     * elementByIosClassChainOrNull(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringOrNull(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorOrNull(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdOrNull(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 4\n     */\n    commands['element' + utils.elFuncSuffix(type)+ 'OrNull'] = function() {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(\n        function(err, elements) {\n          if(!err) {\n            if(elements.length>0) {cb(null,elements[0]);} else {cb(null,null);}\n          } else {\n            cb(err);\n          }\n        }\n      );\n      commands.elements.apply(this, args );\n    };\n\n    /**\n     * elementByClassNameIfExists(value, cb) -> cb(err, element)\n     * elementByCssSelectorIfExists(value, cb) -> cb(err, element)\n     * elementByIdIfExists(value, cb) -> cb(err, element)\n     * elementByNameIfExists(value, cb) -> cb(err, element)\n     * elementByLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByTagNameIfExists(value, cb) -> cb(err, element)\n     * elementByXPathIfExists(value, cb) -> cb(err, element)\n     * elementByCssIfExists(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationIfExists(value, cb) -> cb(err, element)\n     * elementByIosClassChainIfExists(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringIfExists(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorIfExists(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdIfExists(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 6\n     */\n    commands['element' + utils.elFuncSuffix(type)+ 'IfExists'] = function() {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(\n        function(err, elements) {\n          if(!err) {\n            if(elements.length>0) {cb(null,elements[0]);} else {cb(null);}\n          } else {\n            cb(err); }\n        }\n      );\n      commands.elements.apply(this, args);\n    };\n\n    /**\n     * hasElementByClassName(value, cb) -> cb(err, boolean)\n     * hasElementByCssSelector(value, cb) -> cb(err, boolean)\n     * hasElementById(value, cb) -> cb(err, boolean)\n     * hasElementByName(value, cb) -> cb(err, boolean)\n     * hasElementByLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByPartialLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByTagName(value, cb) -> cb(err, boolean)\n     * hasElementByXPath(value, cb) -> cb(err, boolean)\n     * hasElementByCss(value, cb) -> cb(err, boolean)\n     * hasElementByIosUIAutomation(value, cb) -> cb(err, boolean)\n     * hasElementByIosClassChain(value, cb) -> cb(err, boolean)\n     * hasElementByIosPredicateString(value, cb) -> cb(err, boolean)\n     * hasElementByAndroidUIAutomator(value, cb) -> cb(err, boolean)\n     * hasElementByAccessibilityId(value, cb) -> cb(err, boolean)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 8\n     */\n    commands['hasElement' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.hasElement.apply(this, args);\n    };\n\n    /**\n     * waitForElementByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementById(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElement.\n     */\n    commands['waitForElement' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElement.apply(this, args);\n    };\n\n    /**\n     * waitForElementsByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsById(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElements.\n     */\n    commands['waitForElements' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElements.apply(this, args);\n    };\n\n    commands['waitForVisible' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForVisible.apply(this, args);\n    };\n\n    /**\n     * elementsByClassName(value, cb) -> cb(err, elements)\n     * elementsByCssSelector(value, cb) -> cb(err, elements)\n     * elementsById(value, cb) -> cb(err, elements)\n     * elementsByName(value, cb) -> cb(err, elements)\n     * elementsByLinkText(value, cb) -> cb(err, elements)\n     * elementsByPartialLinkText(value, cb) -> cb(err, elements)\n     * elementsByTagName(value, cb) -> cb(err, elements)\n     * elementsByXPath(value, cb) -> cb(err, elements)\n     * elementsByCss(value, cb) -> cb(err, elements)\n     * elementsByIosUIAutomation(value, cb) -> cb(err, elements)\n     * elementsByIosClassChain(value, cb) -> cb(err, elements)\n     * elementsByIosPredicateString(value, cb) -> cb(err, elements)\n     * elementsByAndroidUIAutomator(value, cb) -> cb(err, elements)\n     * elementsByAccessibilityId(value, cb) -> cb(err, elements)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 2\n     */\n  }\n  if(plural){\n    commands['elements' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.elements.apply(this, args);\n    };\n  }\n};\n\n_.each(utils.elementFuncTypes, function(suffix) {\n  addMethodsForSuffix(suffix, true, true);\n});\n\n/**\n * getTagName(element, cb) -> cb(err, name)\n *\n * @jsonWire GET /session/:sessionId/element/:id/name\n */\ncommands.getTagName = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/name'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getAttribute(element, attrName, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 1\n */\ncommands.getAttribute = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      attrName = fargs.all[1];\n  if(!element) { throw new Error('Missing element.'); }\n  if(!attrName) { throw new Error('Missing attribute name.'); }\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/attribute/' + attrName\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * isDisplayed(element, cb) -> cb(err, displayed)\n *\n * @jsonWire GET /session/:sessionId/element/:id/displayed\n */\ncommands.isDisplayed = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/displayed'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.displayed = commands.isDisplayed;\n\n/**\n  * isEnabled(element, cb) -> cb(err, enabled)\n  *\n  * @jsonWire GET /session/:sessionId/element/:id/enabled\n  */\ncommands.isEnabled = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/enabled'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.enabled = commands.isEnabled;\n\n/**\n * isSelected(element, cb) -> cb(err, selected)\n *\n * @jsonWire GET /session/:sessionId/element/:id/selected\n */\ncommands.isSelected = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/selected'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n// commands.selected = commands.isSelected;\n\n/**\n * Get element value (in value attribute):\n * getValue(element, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 3\n */\ncommands.getValue = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0];\n  if(!element) { throw new Error('Missing element.'); }\n  commands.getAttribute.apply(this, [element, 'value', cb]);\n};\n\n/**\n * clickElement(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/click\n */\ncommands.clickElement = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/click'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getComputedCss(element, cssProperty , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/css/:propertyName\n */\ncommands.getComputedCss = function(element, cssProperty) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/css/' + cssProperty\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.getComputedCSS = commands.getComputedCss;\n\n/**\n * equalsElement(element, other , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/equals/:other\n */\ncommands.equalsElement = function(element, other) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/equals/' + other\n    , cb: callbackWithData(cb, this)\n  });\n};\n\nvar _flick1 = function(){\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      xspeed = fargs.all[0],\n      yspeed = fargs.all[1],\n      swipe = fargs.all[2];\n\n  var data = { xspeed: xspeed, yspeed: yspeed };\n  if (swipe) {\n    data.swipe = swipe;\n  }\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/flick'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\nvar _flick2 = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      xoffset = fargs.all[1],\n      yoffset = fargs.all[2],\n      speed = fargs.all[3];\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/flick'\n    , data: { element: element, xoffset: xoffset, yoffset: yoffset, speed: speed }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * flick(xspeed, yspeed, swipe, cb) -> cb(err)\n * Flicks, starting anywhere on the screen.\n *\n * flick(element, xoffset, yoffset, speed, cb) -> cb(err)\n * Flicks, starting at element center.\n *\n * @jsonWire POST /session/:sessionId/touch/flick\n */\ncommands.flick = function() {\n  var args = __slice.call(arguments, 0);\n  if (args.length <= 4) {\n    _flick1.apply(this, args);\n  } else {\n    _flick2.apply(this, args);\n  }\n};\n\n/**\n * tapElement(element) -> cb(err)\n * Taps element\n *\n * @jsonWire POST /session/:sessionId/touch/click\n */\ncommands.tapElement = function(element, cb) {\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/click'\n    , data: { element: element.value.toString() }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * performTouchAction(touchAction) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/perform\n */\ncommands.performTouchAction = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      touchAction = fargs.all[0];\n\n  try {\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/perform',\n      data: {actions: touchAction.toJSON()},\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * performMultiAction(element, multiAction) -> cb(err, touchStateObjects)\n * performMultiAction(multiAction) -> cb(err, touchStateObjects)\n *\n * @jsonWire POST /session/:sessionId/touch/multi/perform\n */\ncommands.performMultiAction = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      multiTouchAction = fargs.all[1];\n  if(!multiTouchAction) {\n    multiTouchAction = element;\n    element = null;\n  }\n  element =  element || multiTouchAction.element;\n  try {\n    var data = multiTouchAction.toJSON(element);\n    if(element) { data.elementId = element.value.toString(); }\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/multi/perform',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * performW3CActions(actions) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/actions\n */\ncommands.performW3CActions = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      actions = fargs.all[0];\n  try {\n    var data = actions.toJSON();\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/actions',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\ncommands.releaseW3CActions = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  try {\n    _this._jsonWireCall({\n      method: 'DELETE',\n      relPath: '/actions',\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n\n};\n\n/**\n * moveTo(element, xoffset, yoffset, cb) -> cb(err)\n * Move to element, element may be null, xoffset and y offset\n * are optional.\n *\n * @jsonWire POST /session/:sessionId/moveto\n */\ncommands.moveTo = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      xoffset = fargs.all[1],\n      yoffset = fargs.all[2];\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/moveto'\n    , data: { element:\n      element? element.toString(): null,\n      xoffset: xoffset,\n      yoffset: yoffset }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * buttonDown(button ,cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttondown\n */\ncommands.buttonDown = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/buttondown'\n    , data: {button: button}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * buttonUp(button, cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttonup\n */\ncommands.buttonUp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/buttonup'\n    , data: {button: button}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * click(button, cb) -> cb(err)\n * Click on current element.\n * Buttons: {left: 0, middle: 1 , right: 2}\n *\n * @jsonWire POST /session/:sessionId/click\n */\ncommands.click = function() {\n  // parsing args, button optional\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/click'\n    , data: {button: button}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * doubleclick(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/doubleclick\n */\ncommands.doubleclick = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/doubleclick'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * type(element, keys, cb) -> cb(err)\n * Type keys (all keys are up at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/element/:id/value\n */\ncommands.type = function(element, keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {keys = [keys];}\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function(key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/value'\n    , data: {value: keys, text: keys.join('')}\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.replace = function(element, keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {keys = [keys];}\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function(key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/element/' + element + '/replace_value'\n    , data: {value: keys}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * submit(element, cb) -> cb(err)\n * Submit a `FORM` element.\n *\n * @jsonWire POST /session/:sessionId/element/:id/submit\n */\ncommands.submit = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/submit'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * keys(keys, cb) -> cb(err)\n * Press keys (keys may still be down at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/keys\n */\ncommands.keys = function(keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {keys = [keys];}\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function(key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/keys'\n    , data: {value: keys}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * clear(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/clear\n */\ncommands.clear = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/clear'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * title(cb) -> cb(err, title)\n *\n * @jsonWire GET /session/:sessionId/title\n */\ncommands.title = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/title'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * source(cb) -> cb(err, source)\n *\n * @jsonWire GET /session/:sessionId/source\n */\ncommands.source = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n\t\tmethod: 'GET'\n\t\t, relPath: '/source'\n\t\t, cb: callbackWithData(cb, this)\n\t});\n};\n\n// element must be specified\nvar _rawText = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/text'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * text(element, cb) -> cb(err, text)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 1\n */\ncommands.text = function() {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var element = fargs.all[0];\n  var _this = this;\n  if (!element || element === 'body') {\n    commands.element.apply(this, ['tag name', 'body', function(err, bodyEl) {\n      if (!err) {_rawText.apply(_this, [bodyEl, cb]);} else {cb(err);}\n    }]);\n  }else {\n    _rawText.apply(_this, [element, cb]);\n  }\n};\n\n/**\n * Check if text is present:\n * textPresent(searchText, element, cb) -> cb(err, boolean)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 3\n */\ncommands.textPresent = function(searchText, element) {\n  var cb = findCallback(arguments);\n  commands.text.apply(this, [element, function(err, text) {\n    if (err) {\n      cb(err, null);\n    } else {\n      cb(err, text.indexOf(searchText) >= 0);\n    }\n  }]);\n};\n\n/**\n * alertText(cb) -> cb(err, text)\n *\n * @jsonWire GET /session/:sessionId/alert_text\n */\ncommands.alertText = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/alert_text'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * alertKeys(keys, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/alert_text\n */\ncommands.alertKeys = function(keys) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/alert_text'\n    , data: {text: keys}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * acceptAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/accept_alert\n */\ncommands.acceptAlert = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/accept_alert'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * dismissAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/dismiss_alert\n */\ncommands.dismissAlert = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/dismiss_alert'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * active(cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element/active\n */\ncommands.active = function() {\n  var cb = findCallback(arguments);\n  var method = this.w3c ? 'GET' : 'POST';\n  this._jsonWireCall({\n    method: method\n    , relPath: '/element/active'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * url(cb) -> cb(err, url)\n *\n * @jsonWire GET /session/:sessionId/url\n */\ncommands.url = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/url'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * allCookies() -> cb(err, cookies)\n *\n * @jsonWire GET /session/:sessionId/cookie\n */\ncommands.allCookies = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/cookie'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setCookie(cookie, cb) -> cb(err)\n * cookie example:\n *  {name:'fruit', value:'apple'}\n * Optional cookie fields:\n *  path, domain, secure, expiry\n *\n * @jsonWire POST /session/:sessionId/cookie\n */\ncommands.setCookie = function(cookie) {\n  var cb = findCallback(arguments);\n  // setting secure otherwise selenium server throws\n  if(cookie){ cookie.secure = cookie.secure || false; }\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/cookie'\n    , data: { cookie: cookie }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * deleteAllCookies(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie\n */\ncommands.deleteAllCookies = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    , relPath: '/cookie'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * deleteCookie(name, cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie/:name\n */\ncommands.deleteCookie = function(name) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    , relPath: '/cookie/' + encodeURIComponent(name)\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire GET /session/:sessionId/orientation\n */\ncommands.getOrientation = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/orientation'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire POST /session/:sessionId/orientation\n */\ncommands.setOrientation = function(orientation) {\n  orientation = orientation.toUpperCase();\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/orientation'\n    , data: { orientation: orientation }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setLocalStorageKey(key, value, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire POST /session/:sessionId/local_storage\n */\ncommands.setLocalStorageKey = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0],\n      value = fargs.all[1];\n\n  commands.safeExecute.apply(\n    this,\n    [\"localStorage.setItem(arguments[0], arguments[1])\", [key, value], cb]\n  );\n};\n\n/**\n * getLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeEval() due to localStorage bug in Selenium\n *\n * @jsonWire GET /session/:sessionId/local_storage/key/:key\n */\ncommands.getLocalStorageKey = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0];\n\n  commands.safeEval.apply(\n    this,\n    [\"localStorage.getItem('\" + key + \"')\", cb]\n  );\n};\n\n/**\n * removeLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage/key/:key\n */\ncommands.removeLocalStorageKey = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0];\n\n  commands.safeExecute.apply(\n    this,\n    [\"localStorage.removeItem(arguments[0])\", [key], cb]\n  );\n};\n\n/**\n * clearLocalStorage(cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage\n */\ncommands.clearLocalStorage = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  commands.safeExecute.apply(\n    this,\n    [\"localStorage.clear()\", cb]\n  );\n};\n\n// deprecated\nvar _isVisible1 = function(element){\n  var cb = findCallback(arguments);\n  commands.getComputedCSS.apply(this, [element, \"display\", function(err, display){\n    if(err){\n      return cb(err);\n    }\n\n    cb(null, display !== \"none\");\n  }]);\n};\n\n// deprecated\nvar _isVisible2 = function(queryType, querySelector){\n  var cb = findCallback(arguments);\n  commands.elementIfExists.apply(this, [queryType, querySelector, function(err, element){\n    if(err){\n      return cb(err);\n    }\n\n    if(element){\n      element.isVisible(cb);\n    } else {\n      cb(null, false); }\n  }]);\n};\n\n// deprecated\ncommands.isVisible = function() {\n  deprecator.warn('isVisible', 'isVisible has been deprecated, use isDisplayed instead.');\n\n  var args = __slice.call(arguments, 0);\n  if (args.length <= 2) {\n    _isVisible1.apply(this, args);\n  } else {\n    _isVisible2.apply(this, args);\n  }\n};\n\n/**\n * Retrieves the pageIndex element (added for Appium):\n * getPageIndex(element, cb) -> cb(err, pageIndex)\n */\ncommands.getPageIndex = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/pageIndex'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getLocation(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location\n */\ncommands.getLocation = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/location'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getLocationInView(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location_in_view\n */\ncommands.getLocationInView = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/location_in_view'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getSize(element, cb) -> cb(err, size)\n *\n * @jsonWire GET /session/:sessionId/element/:id/size\n */\ncommands.getSize = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/size'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Uploads a local file using undocumented\n * POST /session/:sessionId/file\n * uploadFile(filepath, cb) -> cb(err, filepath)\n */\ncommands.uploadFile = function(filepath) {\n  var cb = findCallback(arguments);\n  var _this = this;\n  var archiver = require('archiver');\n\n  var archive = archiver('zip');\n  var dataList = [];\n\n  archive\n  .on('error', function(err) {\n    cb(err);\n  })\n  .on('data', function(data) {\n    dataList.push(data);\n  })\n  .on('end', function() {\n    _this._jsonWireCall({\n    method: 'POST'\n      , relPath: '/file'\n      , data: { file: Buffer.concat(dataList).toString('base64') },\n      cb: callbackWithData(cb, _this)\n    });\n  });\n\n  archive\n  .append(\n    fs.createReadStream(filepath),\n    { name: path.basename(filepath) }\n  );\n\n  archive.finalize(function(err) {\n    if (err) {\n      cb(err);\n    }\n  });\n};\n\ncommands.waitForJsCondition = function(){\n  deprecator.warn('waitForJsCondition',\n    'waitForJsCondition has been deprecated, use waitFor + jsCondition asserter instead.');\n\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var jsConditionExpr = fargs.all[0],\n      timeout = fargs.all[1],\n      pollFreq = fargs.all[2];\n  commands.waitFor.apply(this, [\n    {\n      asserter: asserters.jsCondition(jsConditionExpr, true),\n      timeout: timeout,\n      pollFreq: pollFreq\n    }, function(err, value) {\n      if(err && err.message && err.message.match(/Condition/)) {\n        cb(new Error(\"Element condition wasn't satisfied!\"));\n      } else {\n        cb(err, value);\n      }\n    }]);\n};\ncommands.waitForCondition = commands.waitForJsCondition;\n\n/**\n * Waits for JavaScript condition to be true (async script polling within browser):\n * waitForConditionInBrowser(conditionExpr, timeout, pollFreq, cb) -> cb(err, boolean)\n * conditionExpr: condition expression, should return a boolean\n * timeout and  pollFreq are optional, default: 1000/100.\n * return true if condition satisfied, error otherwise.\n */\ncommands.waitForConditionInBrowser = function() {\n  var _this = this;\n  // parsing args\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      conditionExpr = fargs.all[0],\n      timeout = fargs.all[1] || 1000,\n      poll = fargs.all[2] || 100;\n\n  // calling script\n  commands.safeExecuteAsync.apply( _this, [_waitForConditionInBrowserJsScript,\n    [conditionExpr,timeout,poll], function(err,res) {\n      if(err) {return cb(err);}\n      if(res !== true) {return cb(\"waitForConditionInBrowser failure for: \" + conditionExpr);}\n      cb(null, res);\n    }\n  ]);\n};\n\n/**\n * sauceJobUpdate(jsonData, cb) -> cb(err)\n */\ncommands.sauceJobUpdate = function() {\n  var fargs = utils.varargs(arguments);\n  this._sauceJobUpdate.apply(this, fargs.array);\n};\n\n/**\n * sauceJobStatus(hasPassed, cb) -> cb(err)\n */\ncommands.sauceJobStatus = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      hasPassed = fargs.all[0];\n  this._sauceJobUpdate.apply(this, [{passed: hasPassed}, cb]);\n};\n\n/**\n * sleep(ms, cb) -> cb(err)\n */\ncommands.sleep = function(ms, cb) {\n  cb = cb || function() {};\n  setTimeout(cb , ms);\n};\n\n/**\n * noop(cb) -> cb(err)\n */\ncommands.noop = function(cb) {\n  if(cb) { cb(); }\n};\n\n/**\n * shakeDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\ncommands.shakeDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/shake'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * shake(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\ncommands.shake = commands.shakeDevice;\n\n/**\n * lockDevice(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.lockDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n           seconds = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/lock'\n    , data: {seconds: seconds}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * lock(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.lock = commands.lockDevice;\n\n/**\n * unlockDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.unlockDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/unlock'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * unlock(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.unlock = commands.unlockDevice;\n\n/**\n * isLocked(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/is_locked\n */\ncommands.isLocked = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/is_locked'\n    , cb: callbackWithData(cb)\n  });\n};\n\n/**\n * deviceKeyEvent(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\ncommands.deviceKeyEvent = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1];\n  var data = {keycode: keycode};\n  if(metastate) { data.metastate = metastate; }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/keyevent'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * pressDeviceKey(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\ncommands.pressDeviceKey = commands.deviceKeyEvent;\n\n/**\n * pressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/press_keycode\n */\ncommands.pressKeycode = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1],\n      flags = fargs.all[2];\n  var data = {keycode: keycode};\n  if(metastate) { data.metastate = metastate; }\n  if(flags) {\n    var f = 0;\n    flags.forEach( function (value) { f = f | value; } );\n    data.flags = f;\n   }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/press_keycode'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * longPressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/long_press_keycode\n */\ncommands.longPressKeycode = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1],\n      flags = fargs.all[2];\n  var data = {keycode: keycode};\n  if(metastate) { data.metastate = metastate; }\n  if(flags) {\n    var f = 0;\n    flags.forEach( function (value) { f = f | value; } );\n    data.flags = f;\n   }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/long_press_keycode'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * rotateDevice(element, opts, cb) -> cb(err)\n * rotateDevice(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\ncommands.rotateDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      opts = fargs.all[1];\n  if(!(element && element.value)) {\n    opts = element;\n    element = null;\n  }\n  var data = _.clone(opts);\n  if(element) { data.element = element.value.toString(); }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/rotate'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * rotate(element, opts, cb) -> cb(err)\n * rotate(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\ncommands.rotate = commands.rotateDevice;\n\n/**\n * getCurrentDeviceActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\ncommands.getCurrentDeviceActivity = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/current_activity'\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getCurrentActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\ncommands.getCurrentActivity = commands.getCurrentDeviceActivity;\n\n/**\n * getCurrentPackage(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_package\n */\ncommands.getCurrentPackage = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/current_package'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * installAppOnDevice(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\ncommands.installAppOnDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appPath = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/install_app'\n    , data: { appPath: appPath}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * installApp(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\ncommands.installApp = commands.installAppOnDevice;\n\n/**\n * activateApp(cb) -> cb(err)\n *\n * POST /session/:session_id/appium/device/activate_app\n */\ncommands.activateApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/activate_app'\n    , data: { appId: appId}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * removeAppFromDevice(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\ncommands.removeAppFromDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/remove_app'\n    , data: { appId: appId}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * removeApp(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\ncommands.removeApp = commands.removeAppFromDevice;\n\n/**\n * isAppInstalledOnDevice(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\ncommands.isAppInstalledOnDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      bundleId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/app_installed'\n    , data: {bundleId: bundleId}\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * isAppInstalled(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\ncommands.isAppInstalled = commands.isAppInstalledOnDevice;\n\n/**\n * isKeyboardShown() -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/is_keyboard_shown\n */\ncommands.isKeyboardShown = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/is_keyboard_shown'\n    , cb: callbackWithData(cb)\n  });\n};\n\n/**\n * hideKeyboard() -> cb(err)\n * hideKeyboard(keyName, cb) -> cb(err)\n * hideKeyboard({strategy: 'pressKey', key:'<key>'}) -> cb(err)\n * hideKeyboard({strategy: 'tapOutside'}) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/hide_keyboard\n */\ncommands.hideDeviceKeyboard = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  var data = {};\n  switch(typeof fargs.all[0]) {\n    case 'string':\n      data = {keyName: fargs.all[0]};\n      break;\n    case 'object':\n      data = fargs.all[0];\n      break;\n    default:\n      data= null;\n  }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/hide_keyboard'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\ncommands.hideKeyboard = commands.hideDeviceKeyboard;\n\n/**\n * pushFileToDevice(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\ncommands.pushFileToDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0],\n      base64Data = fargs.all[1];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/push_file'\n    , data: {path: pathOnDevice, data: base64Data}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * pushFile(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\ncommands.pushFile = commands.pushFileToDevice;\n\n\n/**\n * pullFileFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\ncommands.pullFileFromDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/pull_file'\n    , data: {path: pathOnDevice}\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * pullFile(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\ncommands.pullFile = commands.pullFileFromDevice;\n\n/**\n * pullFolderFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n */\n commands.pullFolderFromDevice = function() {\n   var fargs = utils.varargs(arguments);\n   var cb = fargs.callback,\n       pathOnDevice = fargs.all[0];\n   this._jsonWireCall({\n     method: 'POST'\n     , relPath: '/appium/device/pull_folder'\n     , data: {path: pathOnDevice}\n     , cb: callbackWithData(cb, this)\n   });\n };\n\n /**\n  * pullFolder(pathOnDevice, cb) -> cb(base64EncodedData, err)\n  *\n  * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n  */\ncommands.pullFolder = commands.pullFolderFromDevice;\n\n/**\n * toggleAirplaneModeOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleAirplaneModeOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_airplane_mode'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleAirplaneMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleAirplaneMode = commands.toggleAirplaneModeOnDevice;\n/**\n * toggleFlightMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleFlightMode = commands.toggleAirplaneModeOnDevice;\n\n/**\n * toggleWiFiOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\ncommands.toggleWiFiOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_wifi'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleWiFi(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\ncommands.toggleWiFi = commands.toggleWiFiOnDevice;\n\n/**\n * toggleLocationServicesOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\ncommands.toggleLocationServicesOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_location_services'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleLocationServices(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\ncommands.toggleLocationServices = commands.toggleLocationServicesOnDevice;\n\n/**\n * toggleDataOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\ncommands.toggleDataOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_data'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleData(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\ncommands.toggleData = commands.toggleDataOnDevice;\n\n/**\n * launchApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/launch\n */\ncommands.launchApp = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/launch'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * closeApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/close\n */\ncommands.closeApp = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/close'\n    , cb: simpleCallback(cb)\n  });\n};\n\n\n/**\n * resetApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/reset\n */\ncommands.resetApp = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/reset'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * backgroundApp(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/background\n */\ncommands.backgroundApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      seconds = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/background'\n    , data: {seconds: seconds}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * endTestCoverageForApp(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endTestCoverageForApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      intent = fargs.all[0],\n      path = fargs.all[1];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/end_test_coverage'\n    , data: {intent: intent, path: path}\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * endTestCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endTestCoverage = commands.endTestCoverageForApp;\n/**\n * endCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endCoverage = commands.endTestCoverageForApp;\n\n/**\n * complexFindInApp(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\ncommands.complexFindInApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      selector = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/complex_find'\n    , data: {selector: selector}\n    , cb: elementOrElementsCallback(cb, this)\n  });\n};\n\n/**\n * complexFind(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\ncommands.complexFind = commands.complexFindInApp;\n\n/**\n * getAppStrings(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/strings\n */\ncommands.getAppStrings = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      language = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/strings'\n    , data: {language: language}\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setImmediateValueInApp(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\ncommands.setImmediateValueInApp = function(element, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/element/' + element.value.toString() + '/value'\n    , data: {value: value}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * startActivity(options, cb) -> cb(err)\n * Start an arbitrary Android activity during a session. The 'options' parameter should\n * implement the interface {appPackage, appActivity, [appWaitPackage], [appWaitActivity]}.\n *\n * @jsonWire POST /session/:sessionId/appium/device/start_activity\n */\ncommands.startActivity = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    options = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/start_activity'\n    , data: options\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setImmediateValue(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\ncommands.setImmediateValue = commands.setImmediateValueInApp;\n\n/**\n * setNetworkConnection(type, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/network_connection\n */\ncommands.setNetworkConnection = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/network_connection'\n    , data: {parameters: {type: fargs.all[0]}}\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getNetworkConnection(cb) -> cb(err, networkConnectionInfo)\n *\n * @jsonWire GET /session/:sessionId/network_connection\n */\ncommands.getNetworkConnection = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/network_connection'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * openNotifications(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/open_notifications\n */\ncommands.openNotifications = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/open_notifications'\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * settings(cb) -> cb(err, settingsObject)\n *\n * @jsonWire GET /session/:sessionId/appium/settings\n */\ncommands.settings = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/settings'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * updateSettings(settingsObject, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/settings\n */\ncommands.updateSettings = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/settings'\n    , data: {settings: fargs.all[0]}\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * availableIMEEngines(cb) -> cb(err, engines)\n *\n * @jsonWire GET /session/:sessionId/ime/available_engines\n */\ncommands.availableIMEEngines = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/ime/available_engines'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * activateIMEEngine(cb, engine) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/activate\n */\ncommands.activateIMEEngine = function(engine) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/ime/activate'\n    , data: { engine: engine }\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * deactivateIMEEngine(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/deactivate\n */\ncommands.deactivateIMEEngine = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/ime/deactivate'\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * activatedIMEEngine(cb) -> cb(err, active)\n *\n * @jsonWire GET /session/:sessionId/ime/activated\n */\ncommands.isIMEActive = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/ime/activated'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * activeIMEEngine(cb) -> cb(err, activeEngine)\n *\n * @jsonWire GET /session/:sessionId/ime/active_engine\n */\ncommands.activeIMEEngine = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/ime/active_engine'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getDeviceTime(cb) -> cb(err, deviceTime)\n *\n * @jsonWire GET /session/:sessionId/appium/device/system_time\n */\ncommands.getDeviceTime = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/system_time'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\ncommands.touchId = function(){\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      match = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/simulator/touch_id'\n    , cb: callbackWithData(cb, this)\n    , data: {match: match}\n  });\n};\n\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\ncommands.toggleTouchIdEnrollment = function(){\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/simulator/toggle_touch_id_enrollment'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * fingerprint(fingerprintId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/finger_print\n */\ncommands.fingerprint = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      fingerprintId = fargs.all[0];\n  var data = {fingerprintId: fingerprintId};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/finger_print'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * sendSms(phoneNumber, message, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/send_sms\n */\ncommands.sendSms = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      phoneNumber = fargs.all[0],\n      message = fargs.all[1];\n  var data = {phoneNumber: phoneNumber, message: message};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/send_sms'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * gsmCall(phoneNumber, action, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_call\n */\ncommands.gsmCall = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      phoneNumber = fargs.all[0],\n      action = fargs.all[1];\n  var data = {phoneNumber: phoneNumber, action: action};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/gsm_call'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * gsmSignal(signalStrength, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_signal\n */\ncommands.gsmSignal = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      signalStrength = fargs.all[0];\n  var data = {signalStrength: signalStrength};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/gsm_signal'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.gsmSignalStrength = commands.gsmSignal;\n\n/**\n * gsmVoice(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_voice\n */\ncommands.gsmVoice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      state = fargs.all[0];\n  var data = {state: state};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/gsm_voice'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.gsmVoiceState = commands.gsmVoice;\n\n/**\n * powerCapacity(percent, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_capacity\n */\ncommands.powerCapacity = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      percent = fargs.all[0];\n  var data = {percent: percent};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/power_capacity'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * powerAC(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_ac\n */\ncommands.powerAC = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      state = fargs.all[0];\n  var data = {state: state};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/power_ac'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.powerChargerState = commands.powerAC;\n\n/**\n * networkSpeed(netspeed, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/network_speed\n */\ncommands.networkSpeed = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      netspeed = fargs.all[0];\n  var data = {netspeed: netspeed};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/network_speed'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getClipboard(contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/get_clipboard\n */\ncommands.getClipboard = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    contentType = fargs.all[0];\n  var data = {contentType: contentType};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/get_clipboard'\n    , data: data\n    , cb: callbackWithData(cb)\n  });\n};\n\n/**\n * setClipboard(content, contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/set_clipboard\n */\ncommands.setClipboard = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    content = fargs.all[0],\n    contentType = fargs.all[1];\n  var data = {content: content, contentType: contentType};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/set_clipboard'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getSupportedPerformanceDataTypes(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/performanceData/types\n */\ncommands.getSupportedPerformanceDataTypes = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/performanceData/types'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getPerformanceData(packageName, dataType, dataReadTimeout, cb) -> cb(err)\n * dataReadTimeout is optional.\n *\n * @jsonWire POST /session/:sessionId/appium/getPerformanceData\n */\ncommands.getPerformanceData = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    packageName = fargs.all[0],\n    dataType = fargs.all[1],\n    dataReadTimeout = fargs.all[2];\n  var data = {packageName: packageName, dataType: dataType};\n  if (dataReadTimeout) { data.dataReadTimeout = dataReadTimeout; }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/getPerformanceData'\n    , data: data\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.elementsByImageFile = function() {\n  var fargs = utils.varargs(arguments);\n  var _this = this;\n  var cb = fargs.callback,\n    imgPath = fargs.all[0];\n  _this.elementByImageFile(imgPath, true, cb);\n};\n\ncommands.elementByImageFile = function() {\n  var fargs = utils.varargs(arguments);\n  var _this = this;\n  var cb = fargs.callback,\n    imgPath = fargs.all[0],\n    multiple = fargs.all[1] || false;\n  fs.readFile(imgPath, function(err, fileData) {\n    if (err) { return cb(err); }\n    var elFn = multiple ? 'elementsByImage' : 'elementByImage';\n    _this[elFn](fileData.toString('base64'), cb);\n  });\n};\n\nmodule.exports = commands;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}