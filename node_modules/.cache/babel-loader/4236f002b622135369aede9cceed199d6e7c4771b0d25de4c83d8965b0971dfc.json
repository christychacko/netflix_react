{"ast":null,"code":"//\n// vargs.js\n//\n//   variable argument handling for functions taking a callback\n//\n// usage:\n//   \n//   var Args = new(\"vargs\").Constructor;\n//\n//   function (/* [arg1, arg2, ...][,callback] */) {\n//       var args = new(Args)(arguments);\n//       \n//       args.first;    // first argument\n//       args.last;     // last argument before callback\n//       args.callback; // callback argument, or an empty function\n//       args.all;      // all arguments except callback\n//       args.length;   // number of arguments, not including callback\n//       \n//       args.callbackGiven() // returns true or false\n//       args.at(-1)          // last argument, including callback\n//       args.array           // all arguments, including callback\n//   }\n//\nexports.Constructor = function Vargs(arguments) {\n  this.array = Array.prototype.slice.call(arguments);\n  this.__defineGetter__('length', function () {\n    if (this.callbackGiven()) {\n      return this.array.length - 1;\n    } else {\n      return this.array.length;\n    }\n  });\n  this.__defineGetter__('all', function () {\n    if (this.callbackGiven()) {\n      return this.array.slice(0, -1);\n    } else {\n      return this.array;\n    }\n  });\n  this.__defineGetter__('last', function () {\n    if (typeof this.at(-1) === 'function') {\n      return this.at(-2);\n    } else {\n      return this.at(-1);\n    }\n  });\n  this.__defineGetter__('first', function () {\n    return this.array[0];\n  });\n  this.callback = this.callbackGiven() ? this.at(-1) : function () {};\n};\nexports.Constructor.prototype = {\n  callbackGiven: function () {\n    return typeof this.at(-1) === 'function';\n  },\n  at: function (n) {\n    if (n < 0) {\n      return this.array[this.array.length + n];\n    } else {\n      return this.array[n];\n    }\n  }\n};\nexports.Constructor.last = function (args) {\n  return args[args.length - 1];\n};","map":{"version":3,"names":["exports","Constructor","Vargs","arguments","array","Array","prototype","slice","call","__defineGetter__","callbackGiven","length","at","callback","n","last","args"],"sources":["/Users/apps/node_modules/vargs/lib/vargs.js"],"sourcesContent":["//\n// vargs.js\n//\n//   variable argument handling for functions taking a callback\n//\n// usage:\n//   \n//   var Args = new(\"vargs\").Constructor;\n//\n//   function (/* [arg1, arg2, ...][,callback] */) {\n//       var args = new(Args)(arguments);\n//       \n//       args.first;    // first argument\n//       args.last;     // last argument before callback\n//       args.callback; // callback argument, or an empty function\n//       args.all;      // all arguments except callback\n//       args.length;   // number of arguments, not including callback\n//       \n//       args.callbackGiven() // returns true or false\n//       args.at(-1)          // last argument, including callback\n//       args.array           // all arguments, including callback\n//   }\n//\nexports.Constructor = function Vargs(arguments) {\n    this.array = Array.prototype.slice.call(arguments);\n    this.__defineGetter__('length', function () {\n        if (this.callbackGiven()) {\n            return this.array.length - 1;\n        } else {\n            return this.array.length;\n        }\n    });\n    this.__defineGetter__('all', function () {\n        if (this.callbackGiven()) {\n            return this.array.slice(0, -1);\n        } else {\n            return this.array;\n        }\n    });\n    this.__defineGetter__('last', function () {\n        if (typeof(this.at(-1)) === 'function') {\n            return this.at(-2);\n        } else {\n            return this.at(-1);\n        }\n    });\n    this.__defineGetter__('first', function () {\n        return this.array[0];\n    });\n    this.callback = this.callbackGiven() ? this.at(-1)\n                                         : function () {};\n};\n\nexports.Constructor.prototype = {\n    callbackGiven: function () {\n        return typeof(this.at(-1)) === 'function';\n    },\n    at: function (n) {\n        if (n < 0) {\n            return this.array[this.array.length + n];\n        } else {\n            return this.array[n];\n        }\n    }\n};\n\nexports.Constructor.last = function (args) {\n    return args[args.length - 1];\n};\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAACC,WAAW,GAAG,SAASC,KAAKA,CAACC,SAAS,EAAE;EAC5C,IAAI,CAACC,KAAK,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACL,SAAS,CAAC;EAClD,IAAI,CAACM,gBAAgB,CAAC,QAAQ,EAAE,YAAY;IACxC,IAAI,IAAI,CAACC,aAAa,CAAC,CAAC,EAAE;MACtB,OAAO,IAAI,CAACN,KAAK,CAACO,MAAM,GAAG,CAAC;IAChC,CAAC,MAAM;MACH,OAAO,IAAI,CAACP,KAAK,CAACO,MAAM;IAC5B;EACJ,CAAC,CAAC;EACF,IAAI,CAACF,gBAAgB,CAAC,KAAK,EAAE,YAAY;IACrC,IAAI,IAAI,CAACC,aAAa,CAAC,CAAC,EAAE;MACtB,OAAO,IAAI,CAACN,KAAK,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAClC,CAAC,MAAM;MACH,OAAO,IAAI,CAACH,KAAK;IACrB;EACJ,CAAC,CAAC;EACF,IAAI,CAACK,gBAAgB,CAAC,MAAM,EAAE,YAAY;IACtC,IAAI,OAAO,IAAI,CAACG,EAAE,CAAC,CAAC,CAAC,CAAE,KAAK,UAAU,EAAE;MACpC,OAAO,IAAI,CAACA,EAAE,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC,MAAM;MACH,OAAO,IAAI,CAACA,EAAE,CAAC,CAAC,CAAC,CAAC;IACtB;EACJ,CAAC,CAAC;EACF,IAAI,CAACH,gBAAgB,CAAC,OAAO,EAAE,YAAY;IACvC,OAAO,IAAI,CAACL,KAAK,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC;EACF,IAAI,CAACS,QAAQ,GAAG,IAAI,CAACH,aAAa,CAAC,CAAC,GAAG,IAAI,CAACE,EAAE,CAAC,CAAC,CAAC,CAAC,GACX,YAAY,CAAC,CAAC;AACzD,CAAC;AAEDZ,OAAO,CAACC,WAAW,CAACK,SAAS,GAAG;EAC5BI,aAAa,EAAE,SAAAA,CAAA,EAAY;IACvB,OAAO,OAAO,IAAI,CAACE,EAAE,CAAC,CAAC,CAAC,CAAE,KAAK,UAAU;EAC7C,CAAC;EACDA,EAAE,EAAE,SAAAA,CAAUE,CAAC,EAAE;IACb,IAAIA,CAAC,GAAG,CAAC,EAAE;MACP,OAAO,IAAI,CAACV,KAAK,CAAC,IAAI,CAACA,KAAK,CAACO,MAAM,GAAGG,CAAC,CAAC;IAC5C,CAAC,MAAM;MACH,OAAO,IAAI,CAACV,KAAK,CAACU,CAAC,CAAC;IACxB;EACJ;AACJ,CAAC;AAEDd,OAAO,CAACC,WAAW,CAACc,IAAI,GAAG,UAAUC,IAAI,EAAE;EACvC,OAAOA,IAAI,CAACA,IAAI,CAACL,MAAM,GAAG,CAAC,CAAC;AAChC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}