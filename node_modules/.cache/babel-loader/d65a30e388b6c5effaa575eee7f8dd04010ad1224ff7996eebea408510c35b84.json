{"ast":null,"code":"var Args = require(\"vargs\").Constructor,\n  _ = require('lodash'),\n  url = require('url'),\n  JSONWIRE_ERRORS = require('./jsonwire-errors.js');\nvar varargs = exports.varargs = function (args) {\n  var fargs = new Args(args);\n  // returning undefined instead of empty callback\n  fargs.callback = fargs.callbackGiven() ? fargs.callback : undefined;\n  return fargs;\n};\n\n// small helper to make sure we don't loose exceptions\n// use this instead of looking  the last argument manually\nexports.findCallback = function (_arguments) {\n  var fargs = varargs(_arguments);\n  return fargs.callback;\n};\n\n// convert to type to something like ById, ByCssSelector, etc...\nvar STRAT_MAPPING = {\n  '-ios uiautomation': 'ByIosUIAutomation',\n  '-android uiautomator': 'ByAndroidUIAutomator',\n  '-android datamatcher': 'ByAndroidDataMatcher',\n  '-ios class chain': 'ByIosClassChain',\n  '-ios predicate string': 'ByIosPredicateString',\n  '-image': 'ByImage',\n  '-custom': 'ByCustom'\n};\nexports.elFuncSuffix = function (type) {\n  var suffix = STRAT_MAPPING[type];\n  if (!suffix) {\n    suffix = (' by ' + type).replace(/(\\s[a-z])/g, function ($1) {\n      return $1.toUpperCase().replace(' ', '');\n    }).replace('Xpath', 'XPath');\n  }\n  return suffix;\n};\n\n// return correct jsonwire type\nexports.elFuncFullType = function (type) {\n  if (type === 'css') {\n    return 'css selector';\n  } // shortcut for css\n  return type;\n};\n\n// from JsonWire spec + shortcuts + mobile JsonWire spec\nexports.elementFuncTypes = ['class name', 'css selector', 'id', 'name', 'link text', 'partial link text', 'tag name', 'xpath', 'css', '-ios uiautomation', '-android uiautomator', 'accessibility id', '-ios class chain', '-ios predicate string', '-image', '-custom', '-android datamatcher'];\n\n// chai-as-promised promisifier\n// just adding the core method for the sake of safety.\\\n// if you need more than that, build your custom promisifier\nvar Q_CORE_METHODS = [\n// core methods:\n\"then\", \"catch\", \"fail\", \"progress\", \"finally\", \"fin\", \"done\", \"thenResolve\", \"thenReject\", \"nodeify\"];\nexports.transferPromiseness = function (assertion, promise) {\n  _(Q_CORE_METHODS).each(function (methodName) {\n    if (promise[methodName]) {\n      if (assertion._obj) {\n        assertion._obj[methodName] = promise[methodName].bind(promise);\n      }\n      assertion[methodName] = promise[methodName].bind(promise);\n    }\n  });\n  if (promise._enrich) {\n    if (assertion._obj) {\n      promise._enrich(assertion._obj);\n    }\n    promise._enrich(assertion);\n  }\n};\n\n// promise detection\nexports.isPromise = function (x) {\n  return (typeof x === \"object\" || typeof x === \"function\") && x !== null && typeof x.then === \"function\";\n};\nexports.deprecator = {\n  deprecationMessageShown: {},\n  warnDeprecated: true,\n  showHideDeprecation: function (status) {\n    if (status !== undefined) {\n      this.warnDeprecated = status;\n    } else {\n      this.warnDeprecated = !this.warnDeprecated;\n    }\n  },\n  warn: function (cat, message) {\n    if (this.warnDeprecated && !this.deprecationMessageShown[cat]) {\n      this.deprecationMessageShown[cat] = 1;\n      console.warn(message); // eslint-disable-line no-console\n    }\n  }\n};\n\n// Android doesn't like cariage return\nexports.inlineJs = function (script) {\n  return script.replace(/[\\r\\n]/g, '').trim();\n};\nexports.resolveUrl = function (from, to) {\n  if (typeof from === 'object') {\n    from = url.format(from);\n  }\n\n  // making sure the last part of the path doesn't get stripped\n  if (!from.match(/\\/$/)) {\n    from += '/';\n  }\n  return url.parse(url.resolve(from, to));\n};\nexports.strip = function strip(str) {\n  if (typeof str !== 'string') {\n    return str;\n  }\n  var x = [];\n  _(str.length).times(function (i) {\n    if (str.charCodeAt(i)) {\n      x.push(str.charAt(i));\n    }\n  });\n  return x.join('');\n};\nvar trimToLength = function (str, length) {\n  return str && str.length > length ? str.substring(0, length) + '...' : str;\n};\nexports.trimToLength = trimToLength;\nexports.niceArgs = function (args) {\n  return JSON.stringify(args).replace(/^\\[/, '(').replace(/\\]$/, ')');\n};\nexports.niceResp = function (args) {\n  return JSON.stringify(args).replace(/^\\[/, '').replace(/\\]$/, '');\n};\n\n// convert code to string before execution\nexports.codeToString = function (code) {\n  if (typeof code === 'function') {\n    code = 'return (' + code + ').apply(null, arguments);';\n  }\n  return code;\n};\nvar MAX_ERROR_LENGTH = 500;\nexports.newError = function (opts) {\n  var err = new Error();\n  _.each(opts, function (opt, k) {\n    err[k] = opt;\n  });\n  // nicer error output\n  err.inspect = function () {\n    var jsonStr = JSON.stringify(err);\n    return trimToLength(jsonStr, MAX_ERROR_LENGTH);\n  };\n  return err;\n};\nexports.isWebDriverException = function (res) {\n  return res && res.class && res.class.indexOf('WebDriverException') > 0;\n};\nexports.getJsonwireError = function (status) {\n  var jsonwireError = JSONWIRE_ERRORS.filter(function (err) {\n    return err.status === status;\n  });\n  return jsonwireError.length > 0 ? jsonwireError[0] : null;\n};\n\n/**\n * Prefix all unofficial capabilities. Prefix with `wd` by default\n * or with whatever is provided in `caps.w3cPrefix`\n */\nexports.prefixCapabilities = function (caps) {\n  var pairs = _.toPairs(caps);\n  var prefixedCaps = {};\n  var w3cCapabilities = ['browserName', 'browserVersion', 'platformName', 'acceptInsecureCerts', 'pageLoadStrategy', 'proxy', 'setWindowRect', 'timeouts', 'unhandledPromptBehavior'];\n  var prefix = caps.w3cPrefix || 'wd';\n  for (var i = 0; i < pairs.length; i++) {\n    var key = pairs[i][0];\n    var value = pairs[i][1];\n\n    // If an unsupported cap has no prefix, add one.\n    if (key.indexOf(':') < 0 && w3cCapabilities.indexOf(key) < 0) {\n      prefixedCaps[prefix + ':' + key] = value;\n    } else {\n      prefixedCaps[key] = value;\n    }\n  }\n  return prefixedCaps;\n};\nvar w3cElementKeyId = exports.w3cElementKeyId = \"element-6066-11e4-a52e-4f735466cecf\";\nexports.getElementId = function (obj) {\n  return _.isObject(obj) ? obj.ELEMENT || obj[w3cElementKeyId] : undefined;\n};","map":{"version":3,"names":["Args","require","Constructor","_","url","JSONWIRE_ERRORS","varargs","exports","args","fargs","callback","callbackGiven","undefined","findCallback","_arguments","STRAT_MAPPING","elFuncSuffix","type","suffix","replace","$1","toUpperCase","elFuncFullType","elementFuncTypes","Q_CORE_METHODS","transferPromiseness","assertion","promise","each","methodName","_obj","bind","_enrich","isPromise","x","then","deprecator","deprecationMessageShown","warnDeprecated","showHideDeprecation","status","warn","cat","message","console","inlineJs","script","trim","resolveUrl","from","to","format","match","parse","resolve","strip","str","length","times","i","charCodeAt","push","charAt","join","trimToLength","substring","niceArgs","JSON","stringify","niceResp","codeToString","code","MAX_ERROR_LENGTH","newError","opts","err","Error","opt","k","inspect","jsonStr","isWebDriverException","res","class","indexOf","getJsonwireError","jsonwireError","filter","prefixCapabilities","caps","pairs","toPairs","prefixedCaps","w3cCapabilities","prefix","w3cPrefix","key","value","w3cElementKeyId","getElementId","obj","isObject","ELEMENT"],"sources":["/Users/apps/node_modules/wd/lib/utils.js"],"sourcesContent":["var Args = require(\"vargs\").Constructor,\n    _ = require('lodash'),\n    url = require('url'),\n    JSONWIRE_ERRORS = require('./jsonwire-errors.js');\n\nvar varargs = exports.varargs = function(args) {\n  var fargs = new(Args)(args);\n  // returning undefined instead of empty callback\n  fargs.callback = fargs.callbackGiven()? fargs.callback : undefined;\n  return fargs;\n};\n\n// small helper to make sure we don't loose exceptions\n// use this instead of looking  the last argument manually\nexports.findCallback = function(_arguments){\n  var fargs = varargs(_arguments);\n  return fargs.callback;\n};\n\n// convert to type to something like ById, ByCssSelector, etc...\nvar STRAT_MAPPING = {\n  '-ios uiautomation': 'ByIosUIAutomation',\n  '-android uiautomator': 'ByAndroidUIAutomator',\n  '-android datamatcher': 'ByAndroidDataMatcher',\n  '-ios class chain': 'ByIosClassChain',\n  '-ios predicate string': 'ByIosPredicateString',\n  '-image': 'ByImage',\n  '-custom': 'ByCustom',\n};\nexports.elFuncSuffix = function(type){\n  var suffix = STRAT_MAPPING[type];\n  if(!suffix) {\n    suffix = (' by ' + type).replace(/(\\s[a-z])/g,\n      function($1){return $1.toUpperCase().replace(' ','');})\n      .replace('Xpath', 'XPath');\n  }\n  return suffix;\n};\n\n// return correct jsonwire type\nexports.elFuncFullType = function(type){\n  if(type === 'css') {return 'css selector'; } // shortcut for css\n  return type;\n};\n\n// from JsonWire spec + shortcuts + mobile JsonWire spec\nexports.elementFuncTypes = ['class name', 'css selector','id','name',\n  'link text', 'partial link text','tag name', 'xpath', 'css',\n  '-ios uiautomation', '-android uiautomator', 'accessibility id',\n  '-ios class chain', '-ios predicate string', '-image', '-custom', '-android datamatcher'];\n\n// chai-as-promised promisifier\n// just adding the core method for the sake of safety.\\\n// if you need more than that, build your custom promisifier\nvar Q_CORE_METHODS = [\n    // core methods:\n     \"then\", \"catch\", \"fail\", \"progress\", \"finally\", \"fin\", \"done\",\n     \"thenResolve\", \"thenReject\", \"nodeify\"\n];\n\nexports.transferPromiseness = function(assertion, promise) {\n    _(Q_CORE_METHODS).each(function(methodName) {\n      if (promise[methodName]) {\n        if(assertion._obj) {\n          assertion._obj[methodName] = promise[methodName].bind(promise);\n        }\n        assertion[methodName] = promise[methodName].bind(promise);\n      }\n  });\n  if(promise._enrich) {\n    if(assertion._obj) {\n      promise._enrich(assertion._obj);\n    }\n    promise._enrich(assertion);\n  }\n};\n\n// promise detection\nexports.isPromise = function(x) {\n  return (typeof x === \"object\" || typeof x === \"function\") && x !== null && typeof x.then === \"function\";\n};\n\nexports.deprecator = {\n  deprecationMessageShown: {},\n  warnDeprecated: true,\n  showHideDeprecation: function(status) {\n    if(status !== undefined) { this.warnDeprecated = status; }\n    else { this.warnDeprecated = !this.warnDeprecated; }\n  },\n  warn: function(cat, message) {\n    if(this.warnDeprecated && !this.deprecationMessageShown[cat]) {\n      this.deprecationMessageShown[cat] = 1;\n      console.warn(message); // eslint-disable-line no-console\n    }\n  }\n};\n\n// Android doesn't like cariage return\nexports.inlineJs = function(script) {\n  return script.replace(/[\\r\\n]/g,'').trim();\n};\n\nexports.resolveUrl = function(from, to) {\n  if(typeof from === 'object') { from = url.format(from); }\n\n  // making sure the last part of the path doesn't get stripped\n  if(!from.match(/\\/$/)) { from += '/'; }\n\n  return url.parse(url.resolve(from, to));\n};\n\nexports.strip = function strip(str) {\n  if(typeof(str) !== 'string') { return str; }\n  var x = [];\n  _(str.length).times(function(i) {\n    if (str.charCodeAt(i)) {\n      x.push(str.charAt(i));\n    }\n  });\n  return x.join('');\n};\n\nvar trimToLength = function(str, length) {\n  return (str && str.length > length)?\n    str.substring(0,length) + '...' : str;\n};\nexports.trimToLength = trimToLength;\n\nexports.niceArgs = function(args) {\n  return JSON.stringify(args)\n    .replace(/^\\[/, '(')\n    .replace(/\\]$/, ')');\n};\n\nexports.niceResp = function(args) {\n  return JSON.stringify(args)\n    .replace(/^\\[/, '')\n    .replace(/\\]$/, '');\n};\n\n// convert code to string before execution\nexports.codeToString = function(code) {\n  if(typeof code === 'function') {\n    code = 'return (' + code + ').apply(null, arguments);';\n  }\n  return code;\n};\n\nvar MAX_ERROR_LENGTH = 500;\nexports.newError = function(opts)\n{\n  var err = new Error();\n  _.each(opts, function(opt, k) {\n    err[k] = opt;\n  });\n  // nicer error output\n  err.inspect = function() {\n    var jsonStr = JSON.stringify(err);\n    return trimToLength(jsonStr, MAX_ERROR_LENGTH);\n  };\n  return err;\n};\n\nexports.isWebDriverException = function(res) {\n  return res &&\n         res.class &&\n         (res.class.indexOf('WebDriverException') > 0);\n};\n\nexports.getJsonwireError = function(status) {\n  var jsonwireError = JSONWIRE_ERRORS.filter(function(err) {\n    return err.status === status;\n  });\n  return ((jsonwireError.length>0) ? jsonwireError[0] : null);\n};\n\n/**\n * Prefix all unofficial capabilities. Prefix with `wd` by default\n * or with whatever is provided in `caps.w3cPrefix`\n */\nexports.prefixCapabilities = function (caps) {\n  var pairs = _.toPairs(caps);\n  var prefixedCaps = {};\n  var w3cCapabilities = [\n    'browserName', 'browserVersion', 'platformName', 'acceptInsecureCerts',\n    'pageLoadStrategy', 'proxy', 'setWindowRect', 'timeouts', 'unhandledPromptBehavior'\n  ];\n  var prefix = caps.w3cPrefix || 'wd';\n  for (var i=0; i<pairs.length; i++) {\n    var key = pairs[i][0];\n    var value = pairs[i][1];\n\n    // If an unsupported cap has no prefix, add one.\n    if (key.indexOf(':') < 0 && w3cCapabilities.indexOf(key) < 0) {\n      prefixedCaps[prefix + ':' + key] = value;\n    } else {\n      prefixedCaps[key] = value;\n    }\n  }\n  return prefixedCaps;\n};\n\nvar w3cElementKeyId = exports.w3cElementKeyId = \"element-6066-11e4-a52e-4f735466cecf\";\n\nexports.getElementId = function (obj) {\n  return _.isObject(obj) ? obj.ELEMENT || obj[w3cElementKeyId] : undefined;\n};\n"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,OAAO,CAAC,CAACC,WAAW;EACnCC,CAAC,GAAGF,OAAO,CAAC,QAAQ,CAAC;EACrBG,GAAG,GAAGH,OAAO,CAAC,KAAK,CAAC;EACpBI,eAAe,GAAGJ,OAAO,CAAC,sBAAsB,CAAC;AAErD,IAAIK,OAAO,GAAGC,OAAO,CAACD,OAAO,GAAG,UAASE,IAAI,EAAE;EAC7C,IAAIC,KAAK,GAAG,IAAIT,IAAI,CAAEQ,IAAI,CAAC;EAC3B;EACAC,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAACE,aAAa,CAAC,CAAC,GAAEF,KAAK,CAACC,QAAQ,GAAGE,SAAS;EAClE,OAAOH,KAAK;AACd,CAAC;;AAED;AACA;AACAF,OAAO,CAACM,YAAY,GAAG,UAASC,UAAU,EAAC;EACzC,IAAIL,KAAK,GAAGH,OAAO,CAACQ,UAAU,CAAC;EAC/B,OAAOL,KAAK,CAACC,QAAQ;AACvB,CAAC;;AAED;AACA,IAAIK,aAAa,GAAG;EAClB,mBAAmB,EAAE,mBAAmB;EACxC,sBAAsB,EAAE,sBAAsB;EAC9C,sBAAsB,EAAE,sBAAsB;EAC9C,kBAAkB,EAAE,iBAAiB;EACrC,uBAAuB,EAAE,sBAAsB;EAC/C,QAAQ,EAAE,SAAS;EACnB,SAAS,EAAE;AACb,CAAC;AACDR,OAAO,CAACS,YAAY,GAAG,UAASC,IAAI,EAAC;EACnC,IAAIC,MAAM,GAAGH,aAAa,CAACE,IAAI,CAAC;EAChC,IAAG,CAACC,MAAM,EAAE;IACVA,MAAM,GAAG,CAAC,MAAM,GAAGD,IAAI,EAAEE,OAAO,CAAC,YAAY,EAC3C,UAASC,EAAE,EAAC;MAAC,OAAOA,EAAE,CAACC,WAAW,CAAC,CAAC,CAACF,OAAO,CAAC,GAAG,EAAC,EAAE,CAAC;IAAC,CAAC,CAAC,CACtDA,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC;EAC9B;EACA,OAAOD,MAAM;AACf,CAAC;;AAED;AACAX,OAAO,CAACe,cAAc,GAAG,UAASL,IAAI,EAAC;EACrC,IAAGA,IAAI,KAAK,KAAK,EAAE;IAAC,OAAO,cAAc;EAAE,CAAC,CAAC;EAC7C,OAAOA,IAAI;AACb,CAAC;;AAED;AACAV,OAAO,CAACgB,gBAAgB,GAAG,CAAC,YAAY,EAAE,cAAc,EAAC,IAAI,EAAC,MAAM,EAClE,WAAW,EAAE,mBAAmB,EAAC,UAAU,EAAE,OAAO,EAAE,KAAK,EAC3D,mBAAmB,EAAE,sBAAsB,EAAE,kBAAkB,EAC/D,kBAAkB,EAAE,uBAAuB,EAAE,QAAQ,EAAE,SAAS,EAAE,sBAAsB,CAAC;;AAE3F;AACA;AACA;AACA,IAAIC,cAAc,GAAG;AACjB;AACC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAC7D,aAAa,EAAE,YAAY,EAAE,SAAS,CAC1C;AAEDjB,OAAO,CAACkB,mBAAmB,GAAG,UAASC,SAAS,EAAEC,OAAO,EAAE;EACvDxB,CAAC,CAACqB,cAAc,CAAC,CAACI,IAAI,CAAC,UAASC,UAAU,EAAE;IAC1C,IAAIF,OAAO,CAACE,UAAU,CAAC,EAAE;MACvB,IAAGH,SAAS,CAACI,IAAI,EAAE;QACjBJ,SAAS,CAACI,IAAI,CAACD,UAAU,CAAC,GAAGF,OAAO,CAACE,UAAU,CAAC,CAACE,IAAI,CAACJ,OAAO,CAAC;MAChE;MACAD,SAAS,CAACG,UAAU,CAAC,GAAGF,OAAO,CAACE,UAAU,CAAC,CAACE,IAAI,CAACJ,OAAO,CAAC;IAC3D;EACJ,CAAC,CAAC;EACF,IAAGA,OAAO,CAACK,OAAO,EAAE;IAClB,IAAGN,SAAS,CAACI,IAAI,EAAE;MACjBH,OAAO,CAACK,OAAO,CAACN,SAAS,CAACI,IAAI,CAAC;IACjC;IACAH,OAAO,CAACK,OAAO,CAACN,SAAS,CAAC;EAC5B;AACF,CAAC;;AAED;AACAnB,OAAO,CAAC0B,SAAS,GAAG,UAASC,CAAC,EAAE;EAC9B,OAAO,CAAC,OAAOA,CAAC,KAAK,QAAQ,IAAI,OAAOA,CAAC,KAAK,UAAU,KAAKA,CAAC,KAAK,IAAI,IAAI,OAAOA,CAAC,CAACC,IAAI,KAAK,UAAU;AACzG,CAAC;AAED5B,OAAO,CAAC6B,UAAU,GAAG;EACnBC,uBAAuB,EAAE,CAAC,CAAC;EAC3BC,cAAc,EAAE,IAAI;EACpBC,mBAAmB,EAAE,SAAAA,CAASC,MAAM,EAAE;IACpC,IAAGA,MAAM,KAAK5B,SAAS,EAAE;MAAE,IAAI,CAAC0B,cAAc,GAAGE,MAAM;IAAE,CAAC,MACrD;MAAE,IAAI,CAACF,cAAc,GAAG,CAAC,IAAI,CAACA,cAAc;IAAE;EACrD,CAAC;EACDG,IAAI,EAAE,SAAAA,CAASC,GAAG,EAAEC,OAAO,EAAE;IAC3B,IAAG,IAAI,CAACL,cAAc,IAAI,CAAC,IAAI,CAACD,uBAAuB,CAACK,GAAG,CAAC,EAAE;MAC5D,IAAI,CAACL,uBAAuB,CAACK,GAAG,CAAC,GAAG,CAAC;MACrCE,OAAO,CAACH,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC;IACzB;EACF;AACF,CAAC;;AAED;AACApC,OAAO,CAACsC,QAAQ,GAAG,UAASC,MAAM,EAAE;EAClC,OAAOA,MAAM,CAAC3B,OAAO,CAAC,SAAS,EAAC,EAAE,CAAC,CAAC4B,IAAI,CAAC,CAAC;AAC5C,CAAC;AAEDxC,OAAO,CAACyC,UAAU,GAAG,UAASC,IAAI,EAAEC,EAAE,EAAE;EACtC,IAAG,OAAOD,IAAI,KAAK,QAAQ,EAAE;IAAEA,IAAI,GAAG7C,GAAG,CAAC+C,MAAM,CAACF,IAAI,CAAC;EAAE;;EAExD;EACA,IAAG,CAACA,IAAI,CAACG,KAAK,CAAC,KAAK,CAAC,EAAE;IAAEH,IAAI,IAAI,GAAG;EAAE;EAEtC,OAAO7C,GAAG,CAACiD,KAAK,CAACjD,GAAG,CAACkD,OAAO,CAACL,IAAI,EAAEC,EAAE,CAAC,CAAC;AACzC,CAAC;AAED3C,OAAO,CAACgD,KAAK,GAAG,SAASA,KAAKA,CAACC,GAAG,EAAE;EAClC,IAAG,OAAOA,GAAI,KAAK,QAAQ,EAAE;IAAE,OAAOA,GAAG;EAAE;EAC3C,IAAItB,CAAC,GAAG,EAAE;EACV/B,CAAC,CAACqD,GAAG,CAACC,MAAM,CAAC,CAACC,KAAK,CAAC,UAASC,CAAC,EAAE;IAC9B,IAAIH,GAAG,CAACI,UAAU,CAACD,CAAC,CAAC,EAAE;MACrBzB,CAAC,CAAC2B,IAAI,CAACL,GAAG,CAACM,MAAM,CAACH,CAAC,CAAC,CAAC;IACvB;EACF,CAAC,CAAC;EACF,OAAOzB,CAAC,CAAC6B,IAAI,CAAC,EAAE,CAAC;AACnB,CAAC;AAED,IAAIC,YAAY,GAAG,SAAAA,CAASR,GAAG,EAAEC,MAAM,EAAE;EACvC,OAAQD,GAAG,IAAIA,GAAG,CAACC,MAAM,GAAGA,MAAM,GAChCD,GAAG,CAACS,SAAS,CAAC,CAAC,EAACR,MAAM,CAAC,GAAG,KAAK,GAAGD,GAAG;AACzC,CAAC;AACDjD,OAAO,CAACyD,YAAY,GAAGA,YAAY;AAEnCzD,OAAO,CAAC2D,QAAQ,GAAG,UAAS1D,IAAI,EAAE;EAChC,OAAO2D,IAAI,CAACC,SAAS,CAAC5D,IAAI,CAAC,CACxBW,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CACnBA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;AACxB,CAAC;AAEDZ,OAAO,CAAC8D,QAAQ,GAAG,UAAS7D,IAAI,EAAE;EAChC,OAAO2D,IAAI,CAACC,SAAS,CAAC5D,IAAI,CAAC,CACxBW,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAClBA,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;AACvB,CAAC;;AAED;AACAZ,OAAO,CAAC+D,YAAY,GAAG,UAASC,IAAI,EAAE;EACpC,IAAG,OAAOA,IAAI,KAAK,UAAU,EAAE;IAC7BA,IAAI,GAAG,UAAU,GAAGA,IAAI,GAAG,2BAA2B;EACxD;EACA,OAAOA,IAAI;AACb,CAAC;AAED,IAAIC,gBAAgB,GAAG,GAAG;AAC1BjE,OAAO,CAACkE,QAAQ,GAAG,UAASC,IAAI,EAChC;EACE,IAAIC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;EACrBzE,CAAC,CAACyB,IAAI,CAAC8C,IAAI,EAAE,UAASG,GAAG,EAAEC,CAAC,EAAE;IAC5BH,GAAG,CAACG,CAAC,CAAC,GAAGD,GAAG;EACd,CAAC,CAAC;EACF;EACAF,GAAG,CAACI,OAAO,GAAG,YAAW;IACvB,IAAIC,OAAO,GAAGb,IAAI,CAACC,SAAS,CAACO,GAAG,CAAC;IACjC,OAAOX,YAAY,CAACgB,OAAO,EAAER,gBAAgB,CAAC;EAChD,CAAC;EACD,OAAOG,GAAG;AACZ,CAAC;AAEDpE,OAAO,CAAC0E,oBAAoB,GAAG,UAASC,GAAG,EAAE;EAC3C,OAAOA,GAAG,IACHA,GAAG,CAACC,KAAK,IACRD,GAAG,CAACC,KAAK,CAACC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAE;AACtD,CAAC;AAED7E,OAAO,CAAC8E,gBAAgB,GAAG,UAAS7C,MAAM,EAAE;EAC1C,IAAI8C,aAAa,GAAGjF,eAAe,CAACkF,MAAM,CAAC,UAASZ,GAAG,EAAE;IACvD,OAAOA,GAAG,CAACnC,MAAM,KAAKA,MAAM;EAC9B,CAAC,CAAC;EACF,OAAS8C,aAAa,CAAC7B,MAAM,GAAC,CAAC,GAAI6B,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI;AAC5D,CAAC;;AAED;AACA;AACA;AACA;AACA/E,OAAO,CAACiF,kBAAkB,GAAG,UAAUC,IAAI,EAAE;EAC3C,IAAIC,KAAK,GAAGvF,CAAC,CAACwF,OAAO,CAACF,IAAI,CAAC;EAC3B,IAAIG,YAAY,GAAG,CAAC,CAAC;EACrB,IAAIC,eAAe,GAAG,CACpB,aAAa,EAAE,gBAAgB,EAAE,cAAc,EAAE,qBAAqB,EACtE,kBAAkB,EAAE,OAAO,EAAE,eAAe,EAAE,UAAU,EAAE,yBAAyB,CACpF;EACD,IAAIC,MAAM,GAAGL,IAAI,CAACM,SAAS,IAAI,IAAI;EACnC,KAAK,IAAIpC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC+B,KAAK,CAACjC,MAAM,EAAEE,CAAC,EAAE,EAAE;IACjC,IAAIqC,GAAG,GAAGN,KAAK,CAAC/B,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,IAAIsC,KAAK,GAAGP,KAAK,CAAC/B,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEvB;IACA,IAAIqC,GAAG,CAACZ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAIS,eAAe,CAACT,OAAO,CAACY,GAAG,CAAC,GAAG,CAAC,EAAE;MAC5DJ,YAAY,CAACE,MAAM,GAAG,GAAG,GAAGE,GAAG,CAAC,GAAGC,KAAK;IAC1C,CAAC,MAAM;MACLL,YAAY,CAACI,GAAG,CAAC,GAAGC,KAAK;IAC3B;EACF;EACA,OAAOL,YAAY;AACrB,CAAC;AAED,IAAIM,eAAe,GAAG3F,OAAO,CAAC2F,eAAe,GAAG,qCAAqC;AAErF3F,OAAO,CAAC4F,YAAY,GAAG,UAAUC,GAAG,EAAE;EACpC,OAAOjG,CAAC,CAACkG,QAAQ,CAACD,GAAG,CAAC,GAAGA,GAAG,CAACE,OAAO,IAAIF,GAAG,CAACF,eAAe,CAAC,GAAGtF,SAAS;AAC1E,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}