{"ast":null,"code":"module.exports = function () {\n  'use strict';\n\n  const utilities = require('./utilities.js');\n\n  /**\n  * Used to filter parameters from HTTP query string or body data\n  * @class\n  */\n  class StrongParam {\n    /**\n    * @param {props} object Properties\n    */\n    constructor(props) {\n      props = props && typeof props === 'object' ? props : {};\n      Object.keys(props).forEach(key => this[key] = props[key]);\n    }\n    __filter__(fromObject, args, except) {\n      let keyMatch = args.filter(arg => typeof arg === 'string').map(key => {\n        return key.replace(/(\\||\\.|\\{|\\}|\\[|\\]|\\+|\\?|\\$|\\^)/g, '\\\\$1').replace(/\\((.*?)\\)/, (m, sub) => `(${sub.split(',').join('|')})`).replace(/\\*/g, '(.*?)');\n      });\n      keyMatch = new RegExp(`^${keyMatch.join('|')}\\$`);\n      let objKeys = args.filter(arg => typeof arg === 'object' && arg !== null).reduce((o, obj) => {\n        Object.keys(obj).forEach(key => o[key] = obj[key]);\n        return o;\n      }, {});\n      return Object.keys(fromObject).reduce((o, key) => {\n        if (objKeys[key]) {\n          o[key] = this.__filter__(fromObject[key], objKeys[key], except);\n        } else if (!!except ^ !!key.match(keyMatch)) {\n          o[key] = fromObject[key];\n        }\n        return o;\n      }, {});\n    }\n    permit() {\n      return new StrongParam(this.__filter__(this, [].slice.call(arguments), false));\n    }\n    except() {\n      return new StrongParam(this.__filter__(this, [].slice.call(arguments), true));\n    }\n  }\n  ;\n  return StrongParam;\n}();","map":{"version":3,"names":["module","exports","utilities","require","StrongParam","constructor","props","Object","keys","forEach","key","__filter__","fromObject","args","except","keyMatch","filter","arg","map","replace","m","sub","split","join","RegExp","objKeys","reduce","o","obj","match","permit","slice","call","arguments"],"sources":["/Users/apps/node_modules/fxn/core/required/strong_param.js"],"sourcesContent":["module.exports = (function() {\n\n  'use strict';\n\n  const utilities = require('./utilities.js');\n\n  /**\n  * Used to filter parameters from HTTP query string or body data\n  * @class\n  */\n  class StrongParam {\n\n    /**\n    * @param {props} object Properties\n    */\n    constructor(props) {\n\n      props = props && typeof props === 'object' ? props : {};\n      Object.keys(props).forEach(key => this[key] = props[key]);\n\n    }\n\n    __filter__(fromObject, args, except) {\n\n      let keyMatch = args\n        .filter(arg => typeof arg === 'string')\n        .map(key => {\n          return key\n            .replace(/(\\||\\.|\\{|\\}|\\[|\\]|\\+|\\?|\\$|\\^)/g, '\\\\$1')\n            .replace(/\\((.*?)\\)/, (m, sub) => `(${sub.split(',').join('|')})`)\n            .replace(/\\*/g, '(.*?)');\n        });\n      keyMatch = new RegExp(`^${keyMatch.join('|')}\\$`);\n\n      let objKeys = args\n        .filter(arg => typeof arg === 'object' && arg !== null)\n        .reduce((o, obj) => {\n          Object.keys(obj).forEach(key => o[key] = obj[key]);\n          return o;\n        }, {});\n\n      return Object.keys(fromObject).reduce((o, key) => {\n\n        if (objKeys[key]) {\n          o[key] = this.__filter__(fromObject[key], objKeys[key], except);\n        } else if (!!except ^ !!key.match(keyMatch)) {\n          o[key] = fromObject[key];\n        }\n\n        return o;\n\n      }, {});\n\n    }\n\n    permit() {\n\n      return new StrongParam(this.__filter__(this, [].slice.call(arguments), false));\n\n    }\n\n    except() {\n\n      return new StrongParam(this.__filter__(this, [].slice.call(arguments), true));\n\n    }\n\n  };\n\n\n  return StrongParam;\n\n})();\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAI,YAAW;EAE3B,YAAY;;EAEZ,MAAMC,SAAS,GAAGC,OAAO,CAAC,gBAAgB,CAAC;;EAE3C;AACF;AACA;AACA;EACE,MAAMC,WAAW,CAAC;IAEhB;AACJ;AACA;IACIC,WAAWA,CAACC,KAAK,EAAE;MAEjBA,KAAK,GAAGA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAG,CAAC,CAAC;MACvDC,MAAM,CAACC,IAAI,CAACF,KAAK,CAAC,CAACG,OAAO,CAACC,GAAG,IAAI,IAAI,CAACA,GAAG,CAAC,GAAGJ,KAAK,CAACI,GAAG,CAAC,CAAC;IAE3D;IAEAC,UAAUA,CAACC,UAAU,EAAEC,IAAI,EAAEC,MAAM,EAAE;MAEnC,IAAIC,QAAQ,GAAGF,IAAI,CAChBG,MAAM,CAACC,GAAG,IAAI,OAAOA,GAAG,KAAK,QAAQ,CAAC,CACtCC,GAAG,CAACR,GAAG,IAAI;QACV,OAAOA,GAAG,CACPS,OAAO,CAAC,kCAAkC,EAAE,MAAM,CAAC,CACnDA,OAAO,CAAC,WAAW,EAAE,CAACC,CAAC,EAAEC,GAAG,KAAM,IAAGA,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAE,GAAE,CAAC,CACjEJ,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC;MAC5B,CAAC,CAAC;MACJJ,QAAQ,GAAG,IAAIS,MAAM,CAAE,IAAGT,QAAQ,CAACQ,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC;MAEjD,IAAIE,OAAO,GAAGZ,IAAI,CACfG,MAAM,CAACC,GAAG,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAIA,GAAG,KAAK,IAAI,CAAC,CACtDS,MAAM,CAAC,CAACC,CAAC,EAAEC,GAAG,KAAK;QAClBrB,MAAM,CAACC,IAAI,CAACoB,GAAG,CAAC,CAACnB,OAAO,CAACC,GAAG,IAAIiB,CAAC,CAACjB,GAAG,CAAC,GAAGkB,GAAG,CAAClB,GAAG,CAAC,CAAC;QAClD,OAAOiB,CAAC;MACV,CAAC,EAAE,CAAC,CAAC,CAAC;MAER,OAAOpB,MAAM,CAACC,IAAI,CAACI,UAAU,CAAC,CAACc,MAAM,CAAC,CAACC,CAAC,EAAEjB,GAAG,KAAK;QAEhD,IAAIe,OAAO,CAACf,GAAG,CAAC,EAAE;UAChBiB,CAAC,CAACjB,GAAG,CAAC,GAAG,IAAI,CAACC,UAAU,CAACC,UAAU,CAACF,GAAG,CAAC,EAAEe,OAAO,CAACf,GAAG,CAAC,EAAEI,MAAM,CAAC;QACjE,CAAC,MAAM,IAAI,CAAC,CAACA,MAAM,GAAG,CAAC,CAACJ,GAAG,CAACmB,KAAK,CAACd,QAAQ,CAAC,EAAE;UAC3CY,CAAC,CAACjB,GAAG,CAAC,GAAGE,UAAU,CAACF,GAAG,CAAC;QAC1B;QAEA,OAAOiB,CAAC;MAEV,CAAC,EAAE,CAAC,CAAC,CAAC;IAER;IAEAG,MAAMA,CAAA,EAAG;MAEP,OAAO,IAAI1B,WAAW,CAAC,IAAI,CAACO,UAAU,CAAC,IAAI,EAAE,EAAE,CAACoB,KAAK,CAACC,IAAI,CAACC,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;IAEhF;IAEAnB,MAAMA,CAAA,EAAG;MAEP,OAAO,IAAIV,WAAW,CAAC,IAAI,CAACO,UAAU,CAAC,IAAI,EAAE,EAAE,CAACoB,KAAK,CAACC,IAAI,CAACC,SAAS,CAAC,EAAE,IAAI,CAAC,CAAC;IAE/E;EAEF;EAAC;EAGD,OAAO7B,WAAW;AAEpB,CAAC,CAAE,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}