{"ast":null,"code":"var utils = require(\"./utils\"),\n  newError = utils.newError,\n  getJsonwireError = utils.getJsonwireError,\n  isWebDriverException = utils.isWebDriverException;\nvar cbStub = function () {};\n\n// just calls the callback when there is no result\nexports.simpleCallback = function (cb) {\n  cb = cb || cbStub;\n  return function (err, data) {\n    if (err) {\n      return cb(err);\n    }\n    if (data === '' || data === 'OK') {\n      // expected behaviour when not returning JsonWire response\n      cb(null);\n    } else {\n      // looking for JsonWire response\n      var jsonWireRes;\n      var jsonwireError;\n      var errorMessage;\n      var error;\n      try {\n        jsonWireRes = JSON.parse(data);\n      } catch (ign) {}\n      if (jsonWireRes && typeof jsonWireRes.status !== \"undefined\") {\n        // valid JsonWire response\n        if (jsonWireRes.status === 0) {\n          cb(null);\n        } else {\n          jsonwireError = getJsonwireError(jsonWireRes.status);\n          errorMessage = 'Error response status: ' + jsonWireRes.status;\n          if (jsonwireError) {\n            errorMessage += \", \" + jsonwireError.summary + \" - \" + jsonwireError.detail;\n          }\n          if (jsonWireRes.value && jsonWireRes.value.message) {\n            errorMessage += \" Selenium error: \" + jsonWireRes.value.message;\n          }\n          error = newError({\n            message: errorMessage,\n            status: jsonWireRes.status,\n            cause: jsonWireRes\n          });\n          if (jsonwireError) {\n            error['jsonwire-error'] = jsonwireError;\n          }\n          cb(error);\n        }\n      } else if (jsonWireRes && typeof jsonWireRes.value !== \"undefined\") {\n        // valid W3C draft spec response\n        if (jsonWireRes.value === null || Object.keys(jsonWireRes.value).length === 0) {\n          cb(null);\n        } else {\n          jsonwireError = jsonWireRes.value;\n          errorMessage = 'Error response: ' + jsonwireError.error + ' - ' + jsonwireError.message;\n          if (jsonwireError.stacktrace) {\n            errorMessage += ' - Stack trace:\\n' + jsonwireError.stacktrace;\n          }\n          error = newError({\n            message: errorMessage,\n            cause: jsonwireError\n          });\n          cb(error);\n        }\n      } else {\n        // something wrong\n        cb(newError({\n          message: 'Unexpected data in simpleCallback.',\n          data: jsonWireRes || data\n        }));\n      }\n    }\n  };\n};\n\n// base for all callback handling data\nvar callbackWithDataBase = function (cb) {\n  cb = cb || cbStub;\n  return function (err, data) {\n    if (err) {\n      return cb(err);\n    }\n    var obj, alertText;\n    try {\n      obj = JSON.parse(data);\n    } catch (e) {\n      return cb(newError({\n        message: 'Not JSON response',\n        data: data\n      }));\n    }\n    try {\n      alertText = obj.value.alert.text;\n    } catch (e) {\n      alertText = '';\n    }\n    if (obj.status > 0) {\n      var jsonwireError = getJsonwireError(obj.status);\n      var errorMessage = 'Error response status: ' + obj.status + \", \" + alertText;\n      if (jsonwireError) {\n        errorMessage += \", \" + jsonwireError.summary + \" - \" + jsonwireError.detail;\n      }\n      if (obj.value && obj.value.message) {\n        errorMessage += \" Selenium error: \" + obj.value.message;\n      }\n      var error = newError({\n        message: errorMessage,\n        status: obj.status,\n        cause: obj\n      });\n      if (jsonwireError) {\n        error['jsonwire-error'] = jsonwireError;\n      }\n      cb(error);\n    } else {\n      cb(null, obj);\n    }\n  };\n};\n\n// retrieves field value from result\nexports.callbackWithData = function (cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function (err, obj) {\n    if (err) {\n      return cb(err);\n    }\n    if (isWebDriverException(obj.value)) {\n      return cb(newError({\n        message: obj.value.message,\n        cause: obj.value\n      }));\n    }\n    // we might get a WebElement back as part of executeScript, so let's\n    // check to make sure we convert if necessary to element objects\n    var elId = utils.getElementId(obj.value);\n    if (obj.value && typeof elId !== \"undefined\") {\n      obj.value = browser.newElement(elId);\n    } else if (Object.prototype.toString.call(obj.value) === \"[object Array]\") {\n      for (var i = 0; i < obj.value.length; i++) {\n        elId = utils.getElementId(obj.value[i]);\n        if (obj.value[i] && typeof elId !== \"undefined\") {\n          obj.value[i] = browser.newElement(elId);\n        }\n      }\n    }\n    cb(null, obj.value);\n  });\n};\n\n// retrieves ONE element\nexports.elementCallback = function (cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function (err, obj) {\n    if (err) {\n      return cb(err);\n    }\n    if (isWebDriverException(obj.value)) {\n      return cb(newError({\n        message: obj.value.message,\n        cause: obj.value\n      }));\n    }\n    var elId = utils.getElementId(obj.value);\n    if (!elId) {\n      cb(newError({\n        message: \"no ELEMENT in response value field.\",\n        cause: obj\n      }));\n    } else {\n      var el = browser.newElement(elId);\n      cb(null, el);\n    }\n  });\n};\n\n// retrieves SEVERAL elements\nexports.elementsCallback = function (cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function (err, obj) {\n    if (err) {\n      return cb(err);\n    }\n    if (isWebDriverException(obj.value)) {\n      return cb(newError({\n        message: obj.value.message,\n        cause: obj.value\n      }));\n    }\n    if (!Array.isArray(obj.value)) {\n      return cb(newError({\n        message: \"Response value field is not an Array.\",\n        cause: obj.value\n      }));\n    }\n    var i,\n      elements = [];\n    for (i = 0; i < obj.value.length; i++) {\n      var value = obj.value[i];\n      var elId = utils.getElementId(value);\n      var el = browser.newElement(elId);\n      elements.push(el);\n    }\n    cb(null, elements);\n  });\n};\n\n// retrieves ONE or SEVERAL elements\nexports.elementOrElementsCallback = function (cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function (err, obj) {\n    if (err) {\n      return cb(err);\n    }\n    if (isWebDriverException(obj.value)) {\n      return cb(newError({\n        message: obj.value.message,\n        cause: obj.value\n      }));\n    }\n    var el;\n    var elId = utils.getElementId(obj.value);\n    if (elId) {\n      el = browser.newElement(elId);\n      cb(null, el);\n    } else if (Array.isArray(obj.value)) {\n      var i,\n        elements = [];\n      for (i = 0; i < obj.value.length; i++) {\n        elId = utils.getElementId(obj.value[i]);\n        el = browser.newElement(elId);\n        elements.push(el);\n      }\n      cb(null, elements);\n    } else {\n      cb(newError({\n        message: \"no element or element array in response value field.\",\n        cause: obj\n      }));\n    }\n  });\n};","map":{"version":3,"names":["utils","require","newError","getJsonwireError","isWebDriverException","cbStub","exports","simpleCallback","cb","err","data","jsonWireRes","jsonwireError","errorMessage","error","JSON","parse","ign","status","summary","detail","value","message","cause","Object","keys","length","stacktrace","callbackWithDataBase","obj","alertText","e","alert","text","callbackWithData","browser","elId","getElementId","newElement","prototype","toString","call","i","elementCallback","el","elementsCallback","Array","isArray","elements","push","elementOrElementsCallback"],"sources":["/Users/apps/node_modules/wd/lib/callbacks.js"],"sourcesContent":["var utils = require(\"./utils\"),\n    newError = utils.newError,\n    getJsonwireError = utils.getJsonwireError,\n    isWebDriverException = utils.isWebDriverException;\n\nvar cbStub = function() {};\n\n// just calls the callback when there is no result\nexports.simpleCallback = function(cb) {\n  cb = cb || cbStub;\n  return function(err, data) {\n    if(err) { return cb(err); }\n    if((data === '') || (data === 'OK')) {\n      // expected behaviour when not returning JsonWire response\n      cb(null);\n    } else {\n      // looking for JsonWire response\n      var jsonWireRes;\n      var jsonwireError;\n      var errorMessage;\n      var error;\n      try{jsonWireRes = JSON.parse(data);}catch(ign){}\n      if (jsonWireRes && typeof jsonWireRes.status !== \"undefined\") {\n        // valid JsonWire response\n        if(jsonWireRes.status === 0) {\n          cb(null);\n        } else {\n          jsonwireError  = getJsonwireError(jsonWireRes.status);\n          errorMessage = 'Error response status: ' + jsonWireRes.status;\n          if(jsonwireError) {\n            errorMessage += \", \" + jsonwireError.summary + \" - \" + jsonwireError.detail;\n          }\n          if(jsonWireRes.value && jsonWireRes.value.message) {\n            errorMessage += \" Selenium error: \" + jsonWireRes.value.message;\n          }\n          error = newError(\n            { message: errorMessage\n              , status:jsonWireRes.status\n              , cause:jsonWireRes });\n          if(jsonwireError){ error['jsonwire-error'] = jsonwireError; }\n          cb(error);\n        }\n      } else if (jsonWireRes && typeof jsonWireRes.value !== \"undefined\") {\n        // valid W3C draft spec response\n        if (jsonWireRes.value === null || Object.keys(jsonWireRes.value).length === 0) {\n          cb(null);\n        } else {\n          jsonwireError = jsonWireRes.value;\n          errorMessage = 'Error response: ' + jsonwireError.error + ' - ' +\n                             jsonwireError.message;\n          if (jsonwireError.stacktrace) {\n            errorMessage += ' - Stack trace:\\n' + jsonwireError.stacktrace;\n          }\n          error = newError(\n            { message: errorMessage\n              , cause: jsonwireError });\n          cb(error);\n        }\n      } else {\n        // something wrong\n        cb(newError(\n          {message:'Unexpected data in simpleCallback.', data: jsonWireRes || data}) );\n      }\n    }\n  };\n};\n\n// base for all callback handling data\nvar callbackWithDataBase = function(cb) {\n  cb = cb || cbStub;\n  return function(err, data) {\n    if(err) { return cb(err); }\n    var obj,\n        alertText;\n    try {\n      obj = JSON.parse(data);\n    } catch (e) {\n      return cb(newError({message:'Not JSON response', data:data}));\n    }\n    try {\n        alertText = obj.value.alert.text;\n    } catch (e) {\n        alertText = '';\n    }\n    if (obj.status > 0) {\n      var jsonwireError  = getJsonwireError(obj.status);\n      var errorMessage = 'Error response status: ' + obj.status + \", \" +alertText;\n      if(jsonwireError) {\n        errorMessage += \", \" + jsonwireError.summary + \" - \" + jsonwireError.detail;\n      }\n      if(obj.value && obj.value.message) {\n        errorMessage += \" Selenium error: \" + obj.value.message;\n      }\n      var error = newError(\n        { message: errorMessage\n          , status:obj.status\n          , cause:obj });\n      if(jsonwireError){ error['jsonwire-error'] = jsonwireError; }\n      cb(error);\n    } else {\n      cb(null, obj);\n    }\n  };\n};\n\n// retrieves field value from result\nexports.callbackWithData = function(cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function(err,obj) {\n    if(err) {return cb(err);}\n    if(isWebDriverException(obj.value)) {return cb(newError(\n      {message:obj.value.message,cause:obj.value}));}\n    // we might get a WebElement back as part of executeScript, so let's\n    // check to make sure we convert if necessary to element objects\n    var elId = utils.getElementId(obj.value);\n    if(obj.value && typeof elId !== \"undefined\") {\n        obj.value = browser.newElement(elId);\n    } else if (Object.prototype.toString.call(obj.value) === \"[object Array]\") {\n        for (var i = 0; i < obj.value.length; i++) {\n            elId = utils.getElementId(obj.value[i]);\n            if (obj.value[i] && typeof elId !== \"undefined\") {\n                obj.value[i] = browser.newElement(elId);\n            }\n        }\n    }\n    cb(null, obj.value);\n  });\n};\n\n// retrieves ONE element\nexports.elementCallback = function(cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function(err, obj) {\n    if(err) {return cb(err);}\n    if(isWebDriverException(obj.value)) {return cb(newError(\n      {message:obj.value.message,cause:obj.value}));}\n    var elId = utils.getElementId(obj.value);\n    if (!elId) {\n      cb(newError(\n        {message:\"no ELEMENT in response value field.\",cause:obj}));\n    } else {\n      var el = browser.newElement(elId);\n      cb(null, el);\n    }\n  });\n};\n\n// retrieves SEVERAL elements\nexports.elementsCallback = function(cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function(err, obj) {\n    if(err) {return cb(err);}\n    if(isWebDriverException(obj.value)) {return cb(newError(\n      {message:obj.value.message,cause:obj.value}));}\n    if (!Array.isArray(obj.value)) {return cb(newError(\n      {message:\"Response value field is not an Array.\", cause:obj.value}));}\n    var i, elements = [];\n    for (i = 0; i < obj.value.length; i++) {\n      var value = obj.value[i];\n      var elId = utils.getElementId(value);\n      var el = browser.newElement(elId);\n      elements.push(el);\n    }\n    cb(null, elements);\n  });\n};\n\n// retrieves ONE or SEVERAL elements\nexports.elementOrElementsCallback = function(cb, browser) {\n  cb = cb || cbStub;\n  return callbackWithDataBase(function(err, obj) {\n    if(err) {return cb(err);}\n    if(isWebDriverException(obj.value)) {return cb(newError(\n      {message:obj.value.message,cause:obj.value}));}\n    var el;\n    var elId = utils.getElementId(obj.value);\n    if (elId){\n      el = browser.newElement(elId);\n      cb(null, el);\n    } else if (Array.isArray(obj.value)){\n      var i, elements = [];\n      for (i = 0; i < obj.value.length; i++) {\n        elId = utils.getElementId(obj.value[i]);\n        el = browser.newElement(elId);\n        elements.push(el);\n      }\n      cb(null, elements);\n    } else {\n      cb(newError(\n        {message:\"no element or element array in response value field.\",cause:obj}));\n    }\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}